import{s as un,d as Tt,u as B,a as cn,c as ve,p as Ze,r as V,w as ut,h as de,n as dn,i as Oe,b as Ee,E as fn,e as P,f as ne,g as C,j as o,k as a,l as A,o as $,t as pn,m as Ut,q as mn,v as gn,x as Z,y as $t,z as vn,A as S,B as He,C as hn,D as je,F as Le,G as oe,H as _n,I as qe,J as Ue,K as yn,L as F,M as Fe,N as ct,O as dt,P as ft,Q as wn,R as Dt,S as zt,T as Ae,U as bn,V as Cn,W as ht,X as Sn,Y as Rn,Z as kn,_ as An}from"./vendor.BFXNe-OT.js";import{H as xe,a as En,b as In,L as Pn,c as Ke}from"./utils.B9jgYXc9.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const d of r)if(d.type==="childList")for(const v of d.addedNodes)v.tagName==="LINK"&&v.rel==="modulepreload"&&n(v)}).observe(document,{childList:!0,subtree:!0});function s(r){const d={};return r.integrity&&(d.integrity=r.integrity),r.referrerPolicy&&(d.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?d.credentials="include":r.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function n(r){if(r.ep)return;r.ep=!0;const d=s(r);fetch(r.href,d)}})();const $e=typeof document<"u";function Bt(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function xn(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&Bt(e.default)}const J=Object.assign;function et(e,t){const s={};for(const n in t){const r=t[n];s[n]=ye(r)?r.map(e):e(r)}return s}const Me=()=>{},ye=Array.isArray;function _t(e,t){const s={};for(const n in e)s[n]=n in t?t[n]:e[n];return s}const Mt=/#/g,Nn=/&/g,On=/\//g,Vn=/=/g,Tn=/\?/g,Lt=/\+/g,Un=/%5B/g,$n=/%5D/g,Gt=/%5E/g,Dn=/%60/g,Ht=/%7B/g,zn=/%7C/g,qt=/%7D/g,Bn=/%20/g;function pt(e){return e==null?"":encodeURI(""+e).replace(zn,"|").replace(Un,"[").replace($n,"]")}function Mn(e){return pt(e).replace(Ht,"{").replace(qt,"}").replace(Gt,"^")}function ot(e){return pt(e).replace(Lt,"%2B").replace(Bn,"+").replace(Mt,"%23").replace(Nn,"%26").replace(Dn,"`").replace(Ht,"{").replace(qt,"}").replace(Gt,"^")}function Ln(e){return ot(e).replace(Vn,"%3D")}function Gn(e){return pt(e).replace(Mt,"%23").replace(Tn,"%3F")}function Hn(e){return Gn(e).replace(On,"%2F")}function Ge(e){if(e==null)return null;try{return decodeURIComponent(""+e)}catch{}return""+e}const qn=/\/$/,Fn=e=>e.replace(qn,"");function tt(e,t,s="/"){let n,r={},d="",v="";const g=t.indexOf("#");let u=t.indexOf("?");return u=g>=0&&u>g?-1:u,u>=0&&(n=t.slice(0,u),d=t.slice(u,g>0?g:t.length),r=e(d.slice(1))),g>=0&&(n=n||t.slice(0,g),v=t.slice(g,t.length)),n=Jn(n??t,s),{fullPath:n+d+v,path:n,query:r,hash:Ge(v)}}function jn(e,t){const s=t.query?e(t.query):"";return t.path+(s&&"?")+s+(t.hash||"")}function yt(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function Kn(e,t,s){const n=t.matched.length-1,r=s.matched.length-1;return n>-1&&n===r&&De(t.matched[n],s.matched[r])&&Ft(t.params,s.params)&&e(t.query)===e(s.query)&&t.hash===s.hash}function De(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function Ft(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(!Wn(e[s],t[s]))return!1;return!0}function Wn(e,t){return ye(e)?wt(e,t):ye(t)?wt(t,e):e===t}function wt(e,t){return ye(t)?e.length===t.length&&e.every((s,n)=>s===t[n]):e.length===1&&e[0]===t}function Jn(e,t){if(e.startsWith("/"))return e;if(!e)return t;const s=t.split("/"),n=e.split("/"),r=n[n.length-1];(r===".."||r===".")&&n.push("");let d=s.length-1,v,g;for(v=0;v<n.length;v++)if(g=n[v],g!==".")if(g==="..")d>1&&d--;else break;return s.slice(0,d).join("/")+"/"+n.slice(v).join("/")}const Ie={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let at=(function(e){return e.pop="pop",e.push="push",e})({}),nt=(function(e){return e.back="back",e.forward="forward",e.unknown="",e})({});function Qn(e){if(!e)if($e){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),Fn(e)}const Yn=/^[^#]+#/;function Xn(e,t){return e.replace(Yn,"#")+t}function Zn(e,t){const s=document.documentElement.getBoundingClientRect(),n=e.getBoundingClientRect();return{behavior:t.behavior,left:n.left-s.left-(t.left||0),top:n.top-s.top-(t.top||0)}}const We=()=>({left:window.scrollX,top:window.scrollY});function es(e){let t;if("el"in e){const s=e.el,n=typeof s=="string"&&s.startsWith("#"),r=typeof s=="string"?n?document.getElementById(s.slice(1)):document.querySelector(s):s;if(!r)return;t=Zn(r,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function bt(e,t){return(history.state?history.state.position-t:-1)+e}const rt=new Map;function ts(e,t){rt.set(e,t)}function ns(e){const t=rt.get(e);return rt.delete(e),t}function ss(e){return typeof e=="string"||e&&typeof e=="object"}function jt(e){return typeof e=="string"||typeof e=="symbol"}let te=(function(e){return e[e.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",e[e.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",e[e.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",e[e.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",e[e.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",e})({});const Kt=Symbol("");te.MATCHER_NOT_FOUND+"",te.NAVIGATION_GUARD_REDIRECT+"",te.NAVIGATION_ABORTED+"",te.NAVIGATION_CANCELLED+"",te.NAVIGATION_DUPLICATED+"";function ze(e,t){return J(new Error,{type:e,[Kt]:!0},t)}function ke(e,t){return e instanceof Error&&Kt in e&&(t==null||!!(e.type&t))}const os=["params","query","hash"];function as(e){if(typeof e=="string")return e;if(e.path!=null)return e.path;const t={};for(const s of os)s in e&&(t[s]=e[s]);return JSON.stringify(t,null,2)}function rs(e){const t={};if(e===""||e==="?")return t;const s=(e[0]==="?"?e.slice(1):e).split("&");for(let n=0;n<s.length;++n){const r=s[n].replace(Lt," "),d=r.indexOf("="),v=Ge(d<0?r:r.slice(0,d)),g=d<0?null:Ge(r.slice(d+1));if(v in t){let u=t[v];ye(u)||(u=t[v]=[u]),u.push(g)}else t[v]=g}return t}function Ct(e){let t="";for(let s in e){const n=e[s];if(s=Ln(s),n==null){n!==void 0&&(t+=(t.length?"&":"")+s);continue}(ye(n)?n.map(r=>r&&ot(r)):[n&&ot(n)]).forEach(r=>{r!==void 0&&(t+=(t.length?"&":"")+s,r!=null&&(t+="="+r))})}return t}function ls(e){const t={};for(const s in e){const n=e[s];n!==void 0&&(t[s]=ye(n)?n.map(r=>r==null?null:""+r):n==null?n:""+n)}return t}const is=Symbol(""),St=Symbol(""),Je=Symbol(""),mt=Symbol(""),lt=Symbol("");function Be(){let e=[];function t(n){return e.push(n),()=>{const r=e.indexOf(n);r>-1&&e.splice(r,1)}}function s(){e=[]}return{add:t,list:()=>e.slice(),reset:s}}function Pe(e,t,s,n,r,d=v=>v()){const v=n&&(n.enterCallbacks[r]=n.enterCallbacks[r]||[]);return()=>new Promise((g,u)=>{const h=f=>{f===!1?u(ze(te.NAVIGATION_ABORTED,{from:s,to:t})):f instanceof Error?u(f):ss(f)?u(ze(te.NAVIGATION_GUARD_REDIRECT,{from:t,to:f})):(v&&n.enterCallbacks[r]===v&&typeof f=="function"&&v.push(f),g())},_=d(()=>e.call(n&&n.instances[r],t,s,h));let m=Promise.resolve(_);e.length<3&&(m=m.then(h)),m.catch(f=>u(f))})}function st(e,t,s,n,r=d=>d()){const d=[];for(const v of e)for(const g in v.components){let u=v.components[g];if(!(t!=="beforeRouteEnter"&&!v.instances[g]))if(Bt(u)){const h=(u.__vccOpts||u)[t];h&&d.push(Pe(h,s,n,v,g,r))}else{let h=u();d.push(()=>h.then(_=>{if(!_)throw new Error(`Couldn't resolve component "${g}" at "${v.path}"`);const m=xn(_)?_.default:_;v.mods[g]=_,v.components[g]=m;const f=(m.__vccOpts||m)[t];return f&&Pe(f,s,n,v,g,r)()}))}}return d}function us(e,t){const s=[],n=[],r=[],d=Math.max(t.matched.length,e.matched.length);for(let v=0;v<d;v++){const g=t.matched[v];g&&(e.matched.find(h=>De(h,g))?n.push(g):s.push(g));const u=e.matched[v];u&&(t.matched.find(h=>De(h,u))||r.push(u))}return[s,n,r]}let cs=()=>location.protocol+"//"+location.host;function Wt(e,t){const{pathname:s,search:n,hash:r}=t,d=e.indexOf("#");if(d>-1){let v=r.includes(e.slice(d))?e.slice(d).length:1,g=r.slice(v);return g[0]!=="/"&&(g="/"+g),yt(g,"")}return yt(s,e)+n+r}function ds(e,t,s,n){let r=[],d=[],v=null;const g=({state:f})=>{const c=Wt(e,location),R=s.value,O=t.value;let D=0;if(f){if(s.value=c,t.value=f,v&&v===R){v=null;return}D=O?f.position-O.position:0}else n(c);r.forEach(U=>{U(s.value,R,{delta:D,type:at.pop,direction:D?D>0?nt.forward:nt.back:nt.unknown})})};function u(){v=s.value}function h(f){r.push(f);const c=()=>{const R=r.indexOf(f);R>-1&&r.splice(R,1)};return d.push(c),c}function _(){if(document.visibilityState==="hidden"){const{history:f}=window;if(!f.state)return;f.replaceState(J({},f.state,{scroll:We()}),"")}}function m(){for(const f of d)f();d=[],window.removeEventListener("popstate",g),window.removeEventListener("pagehide",_),document.removeEventListener("visibilitychange",_)}return window.addEventListener("popstate",g),window.addEventListener("pagehide",_),document.addEventListener("visibilitychange",_),{pauseListeners:u,listen:h,destroy:m}}function Rt(e,t,s,n=!1,r=!1){return{back:e,current:t,forward:s,replaced:n,position:window.history.length,scroll:r?We():null}}function fs(e){const{history:t,location:s}=window,n={value:Wt(e,s)},r={value:t.state};r.value||d(n.value,{back:null,current:n.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function d(u,h,_){const m=e.indexOf("#"),f=m>-1?(s.host&&document.querySelector("base")?e:e.slice(m))+u:cs()+e+u;try{t[_?"replaceState":"pushState"](h,"",f),r.value=h}catch(c){console.error(c),s[_?"replace":"assign"](f)}}function v(u,h){d(u,J({},t.state,Rt(r.value.back,u,r.value.forward,!0),h,{position:r.value.position}),!0),n.value=u}function g(u,h){const _=J({},r.value,t.state,{forward:u,scroll:We()});d(_.current,_,!0),d(u,J({},Rt(n.value,u,null),{position:_.position+1},h),!1),n.value=u}return{location:n,state:r,push:g,replace:v}}function ps(e){e=Qn(e);const t=fs(e),s=ds(e,t.state,t.location,t.replace);function n(d,v=!0){v||s.pauseListeners(),history.go(d)}const r=J({location:"",base:e,go:n,createHref:Xn.bind(null,e)},t,s);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>t.state.value}),r}let Ne=(function(e){return e[e.Static=0]="Static",e[e.Param=1]="Param",e[e.Group=2]="Group",e})({});var ie=(function(e){return e[e.Static=0]="Static",e[e.Param=1]="Param",e[e.ParamRegExp=2]="ParamRegExp",e[e.ParamRegExpEnd=3]="ParamRegExpEnd",e[e.EscapeNext=4]="EscapeNext",e})(ie||{});const ms={type:Ne.Static,value:""},gs=/[a-zA-Z0-9_]/;function vs(e){if(!e)return[[]];if(e==="/")return[[ms]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(c){throw new Error(`ERR (${s})/"${h}": ${c}`)}let s=ie.Static,n=s;const r=[];let d;function v(){d&&r.push(d),d=[]}let g=0,u,h="",_="";function m(){h&&(s===ie.Static?d.push({type:Ne.Static,value:h}):s===ie.Param||s===ie.ParamRegExp||s===ie.ParamRegExpEnd?(d.length>1&&(u==="*"||u==="+")&&t(`A repeatable param (${h}) must be alone in its segment. eg: '/:ids+.`),d.push({type:Ne.Param,value:h,regexp:_,repeatable:u==="*"||u==="+",optional:u==="*"||u==="?"})):t("Invalid state to consume buffer"),h="")}function f(){h+=u}for(;g<e.length;){if(u=e[g++],u==="\\"&&s!==ie.ParamRegExp){n=s,s=ie.EscapeNext;continue}switch(s){case ie.Static:u==="/"?(h&&m(),v()):u===":"?(m(),s=ie.Param):f();break;case ie.EscapeNext:f(),s=n;break;case ie.Param:u==="("?s=ie.ParamRegExp:gs.test(u)?f():(m(),s=ie.Static,u!=="*"&&u!=="?"&&u!=="+"&&g--);break;case ie.ParamRegExp:u===")"?_[_.length-1]=="\\"?_=_.slice(0,-1)+u:s=ie.ParamRegExpEnd:_+=u;break;case ie.ParamRegExpEnd:m(),s=ie.Static,u!=="*"&&u!=="?"&&u!=="+"&&g--,_="";break;default:t("Unknown state");break}}return s===ie.ParamRegExp&&t(`Unfinished custom RegExp for param "${h}"`),m(),v(),r}const kt="[^/]+?",hs={sensitive:!1,strict:!1,start:!0,end:!0};var pe=(function(e){return e[e._multiplier=10]="_multiplier",e[e.Root=90]="Root",e[e.Segment=40]="Segment",e[e.SubSegment=30]="SubSegment",e[e.Static=40]="Static",e[e.Dynamic=20]="Dynamic",e[e.BonusCustomRegExp=10]="BonusCustomRegExp",e[e.BonusWildcard=-50]="BonusWildcard",e[e.BonusRepeatable=-20]="BonusRepeatable",e[e.BonusOptional=-8]="BonusOptional",e[e.BonusStrict=.7000000000000001]="BonusStrict",e[e.BonusCaseSensitive=.25]="BonusCaseSensitive",e})(pe||{});const _s=/[.+*?^${}()[\]/\\]/g;function ys(e,t){const s=J({},hs,t),n=[];let r=s.start?"^":"";const d=[];for(const h of e){const _=h.length?[]:[pe.Root];s.strict&&!h.length&&(r+="/");for(let m=0;m<h.length;m++){const f=h[m];let c=pe.Segment+(s.sensitive?pe.BonusCaseSensitive:0);if(f.type===Ne.Static)m||(r+="/"),r+=f.value.replace(_s,"\\$&"),c+=pe.Static;else if(f.type===Ne.Param){const{value:R,repeatable:O,optional:D,regexp:U}=f;d.push({name:R,repeatable:O,optional:D});const b=U||kt;if(b!==kt){c+=pe.BonusCustomRegExp;try{`${b}`}catch(j){throw new Error(`Invalid custom RegExp for param "${R}" (${b}): `+j.message)}}let k=O?`((?:${b})(?:/(?:${b}))*)`:`(${b})`;m||(k=D&&h.length<2?`(?:/${k})`:"/"+k),D&&(k+="?"),r+=k,c+=pe.Dynamic,D&&(c+=pe.BonusOptional),O&&(c+=pe.BonusRepeatable),b===".*"&&(c+=pe.BonusWildcard)}_.push(c)}n.push(_)}if(s.strict&&s.end){const h=n.length-1;n[h][n[h].length-1]+=pe.BonusStrict}s.strict||(r+="/?"),s.end?r+="$":s.strict&&!r.endsWith("/")&&(r+="(?:/|$)");const v=new RegExp(r,s.sensitive?"":"i");function g(h){const _=h.match(v),m={};if(!_)return null;for(let f=1;f<_.length;f++){const c=_[f]||"",R=d[f-1];m[R.name]=c&&R.repeatable?c.split("/"):c}return m}function u(h){let _="",m=!1;for(const f of e){(!m||!_.endsWith("/"))&&(_+="/"),m=!1;for(const c of f)if(c.type===Ne.Static)_+=c.value;else if(c.type===Ne.Param){const{value:R,repeatable:O,optional:D}=c,U=R in h?h[R]:"";if(ye(U)&&!O)throw new Error(`Provided param "${R}" is an array but it is not repeatable (* or + modifiers)`);const b=ye(U)?U.join("/"):U;if(!b)if(D)f.length<2&&(_.endsWith("/")?_=_.slice(0,-1):m=!0);else throw new Error(`Missing required param "${R}"`);_+=b}}return _||"/"}return{re:v,score:n,keys:d,parse:g,stringify:u}}function ws(e,t){let s=0;for(;s<e.length&&s<t.length;){const n=t[s]-e[s];if(n)return n;s++}return e.length<t.length?e.length===1&&e[0]===pe.Static+pe.Segment?-1:1:e.length>t.length?t.length===1&&t[0]===pe.Static+pe.Segment?1:-1:0}function Jt(e,t){let s=0;const n=e.score,r=t.score;for(;s<n.length&&s<r.length;){const d=ws(n[s],r[s]);if(d)return d;s++}if(Math.abs(r.length-n.length)===1){if(At(n))return 1;if(At(r))return-1}return r.length-n.length}function At(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const bs={strict:!1,end:!0,sensitive:!1};function Cs(e,t,s){const n=ys(vs(e.path),s),r=J(n,{record:e,parent:t,children:[],alias:[]});return t&&!r.record.aliasOf==!t.record.aliasOf&&t.children.push(r),r}function Ss(e,t){const s=[],n=new Map;t=_t(bs,t);function r(m){return n.get(m)}function d(m,f,c){const R=!c,O=It(m);O.aliasOf=c&&c.record;const D=_t(t,m),U=[O];if("alias"in m){const j=typeof m.alias=="string"?[m.alias]:m.alias;for(const q of j)U.push(It(J({},O,{components:c?c.record.components:O.components,path:q,aliasOf:c?c.record:O})))}let b,k;for(const j of U){const{path:q}=j;if(f&&q[0]!=="/"){const x=f.record.path,w=x[x.length-1]==="/"?"":"/";j.path=f.record.path+(q&&w+q)}if(b=Cs(j,f,D),c?c.alias.push(b):(k=k||b,k!==b&&k.alias.push(b),R&&m.name&&!Pt(b)&&v(m.name)),Qt(b)&&u(b),O.children){const x=O.children;for(let w=0;w<x.length;w++)d(x[w],b,c&&c.children[w])}c=c||b}return k?()=>{v(k)}:Me}function v(m){if(jt(m)){const f=n.get(m);f&&(n.delete(m),s.splice(s.indexOf(f),1),f.children.forEach(v),f.alias.forEach(v))}else{const f=s.indexOf(m);f>-1&&(s.splice(f,1),m.record.name&&n.delete(m.record.name),m.children.forEach(v),m.alias.forEach(v))}}function g(){return s}function u(m){const f=As(m,s);s.splice(f,0,m),m.record.name&&!Pt(m)&&n.set(m.record.name,m)}function h(m,f){let c,R={},O,D;if("name"in m&&m.name){if(c=n.get(m.name),!c)throw ze(te.MATCHER_NOT_FOUND,{location:m});D=c.record.name,R=J(Et(f.params,c.keys.filter(k=>!k.optional).concat(c.parent?c.parent.keys.filter(k=>k.optional):[]).map(k=>k.name)),m.params&&Et(m.params,c.keys.map(k=>k.name))),O=c.stringify(R)}else if(m.path!=null)O=m.path,c=s.find(k=>k.re.test(O)),c&&(R=c.parse(O),D=c.record.name);else{if(c=f.name?n.get(f.name):s.find(k=>k.re.test(f.path)),!c)throw ze(te.MATCHER_NOT_FOUND,{location:m,currentLocation:f});D=c.record.name,R=J({},f.params,m.params),O=c.stringify(R)}const U=[];let b=c;for(;b;)U.unshift(b.record),b=b.parent;return{name:D,path:O,params:R,matched:U,meta:ks(U)}}e.forEach(m=>d(m));function _(){s.length=0,n.clear()}return{addRoute:d,resolve:h,removeRoute:v,clearRoutes:_,getRoutes:g,getRecordMatcher:r}}function Et(e,t){const s={};for(const n of t)n in e&&(s[n]=e[n]);return s}function It(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:Rs(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function Rs(e){const t={},s=e.props||!1;if("component"in e)t.default=s;else for(const n in e.components)t[n]=typeof s=="object"?s[n]:s;return t}function Pt(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function ks(e){return e.reduce((t,s)=>J(t,s.meta),{})}function As(e,t){let s=0,n=t.length;for(;s!==n;){const d=s+n>>1;Jt(e,t[d])<0?n=d:s=d+1}const r=Es(e);return r&&(n=t.lastIndexOf(r,n-1)),n}function Es(e){let t=e;for(;t=t.parent;)if(Qt(t)&&Jt(e,t)===0)return t}function Qt({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function xt(e){const t=Oe(Je),s=Oe(mt),n=ve(()=>{const u=B(e.to);return t.resolve(u)}),r=ve(()=>{const{matched:u}=n.value,{length:h}=u,_=u[h-1],m=s.matched;if(!_||!m.length)return-1;const f=m.findIndex(De.bind(null,_));if(f>-1)return f;const c=Nt(u[h-2]);return h>1&&Nt(_)===c&&m[m.length-1].path!==c?m.findIndex(De.bind(null,u[h-2])):f}),d=ve(()=>r.value>-1&&Os(s.params,n.value.params)),v=ve(()=>r.value>-1&&r.value===s.matched.length-1&&Ft(s.params,n.value.params));function g(u={}){if(Ns(u)){const h=t[B(e.replace)?"replace":"push"](B(e.to)).catch(Me);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>h),h}return Promise.resolve()}return{route:n,href:ve(()=>n.value.href),isActive:d,isExactActive:v,navigate:g}}function Is(e){return e.length===1?e[0]:e}const Ps=Tt({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:xt,setup(e,{slots:t}){const s=Ee(xt(e)),{options:n}=Oe(Je),r=ve(()=>({[Ot(e.activeClass,n.linkActiveClass,"router-link-active")]:s.isActive,[Ot(e.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:s.isExactActive}));return()=>{const d=t.default&&Is(t.default(s));return e.custom?d:de("a",{"aria-current":s.isExactActive?e.ariaCurrentValue:null,href:s.href,onClick:s.navigate,class:r.value},d)}}}),xs=Ps;function Ns(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function Os(e,t){for(const s in t){const n=t[s],r=e[s];if(typeof n=="string"){if(n!==r)return!1}else if(!ye(r)||r.length!==n.length||n.some((d,v)=>d!==r[v]))return!1}return!0}function Nt(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const Ot=(e,t,s)=>e??t??s,Vs=Tt({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:s}){const n=Oe(lt),r=ve(()=>e.route||n.value),d=Oe(St,0),v=ve(()=>{let h=B(d);const{matched:_}=r.value;let m;for(;(m=_[h])&&!m.components;)h++;return h}),g=ve(()=>r.value.matched[v.value]);Ze(St,ve(()=>v.value+1)),Ze(is,g),Ze(lt,r);const u=V();return ut(()=>[u.value,g.value,e.name],([h,_,m],[f,c,R])=>{_&&(_.instances[m]=h,c&&c!==_&&h&&h===f&&(_.leaveGuards.size||(_.leaveGuards=c.leaveGuards),_.updateGuards.size||(_.updateGuards=c.updateGuards))),h&&_&&(!c||!De(_,c)||!f)&&(_.enterCallbacks[m]||[]).forEach(O=>O(h))},{flush:"post"}),()=>{const h=r.value,_=e.name,m=g.value,f=m&&m.components[_];if(!f)return Vt(s.default,{Component:f,route:h});const c=m.props[_],R=c?c===!0?h.params:typeof c=="function"?c(h):c:null,D=de(f,J({},R,t,{onVnodeUnmounted:U=>{U.component.isUnmounted&&(m.instances[_]=null)},ref:u}));return Vt(s.default,{Component:D,route:h})||D}}});function Vt(e,t){if(!e)return null;const s=e(t);return s.length===1?s[0]:s}const Ts=Vs;function Us(e){const t=Ss(e.routes,e),s=e.parseQuery||rs,n=e.stringifyQuery||Ct,r=e.history,d=Be(),v=Be(),g=Be(),u=un(Ie);let h=Ie;$e&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const _=et.bind(null,i=>""+i),m=et.bind(null,Hn),f=et.bind(null,Ge);function c(i,l){let y,E;return jt(i)?(y=t.getRecordMatcher(i),E=l):E=i,t.addRoute(E,y)}function R(i){const l=t.getRecordMatcher(i);l&&t.removeRoute(l)}function O(){return t.getRoutes().map(i=>i.record)}function D(i){return!!t.getRecordMatcher(i)}function U(i,l){if(l=J({},l||u.value),typeof i=="string"){const M=tt(s,i,l.path),N=t.resolve({path:M.path},l),ce=r.createHref(M.fullPath);return J(M,N,{params:f(N.params),hash:Ge(M.hash),redirectedFrom:void 0,href:ce})}let y;if(i.path!=null)y=J({},i,{path:tt(s,i.path,l.path).path});else{const M=J({},i.params);for(const N in M)M[N]==null&&delete M[N];y=J({},i,{params:m(M)}),l.params=m(l.params)}const E=t.resolve(y,l),G=i.hash||"";E.params=_(f(E.params));const H=jn(n,J({},i,{hash:Mn(G),path:E.path})),L=r.createHref(H);return J({fullPath:H,hash:G,query:n===Ct?ls(i.query):i.query||{}},E,{redirectedFrom:void 0,href:L})}function b(i){return typeof i=="string"?tt(s,i,u.value.path):J({},i)}function k(i,l){if(h!==i)return ze(te.NAVIGATION_CANCELLED,{from:l,to:i})}function j(i){return w(i)}function q(i){return j(J(b(i),{replace:!0}))}function x(i,l){const y=i.matched[i.matched.length-1];if(y&&y.redirect){const{redirect:E}=y;let G=typeof E=="function"?E(i,l):E;return typeof G=="string"&&(G=G.includes("?")||G.includes("#")?G=b(G):{path:G},G.params={}),J({query:i.query,hash:i.hash,params:G.path!=null?{}:i.params},G)}}function w(i,l){const y=h=U(i),E=u.value,G=i.state,H=i.force,L=i.replace===!0,M=x(y,E);if(M)return w(J(b(M),{state:typeof M=="object"?J({},G,M.state):G,force:H,replace:L}),l||y);const N=y;N.redirectedFrom=l;let ce;return!H&&Kn(n,E,y)&&(ce=ze(te.NAVIGATION_DUPLICATED,{to:N,from:E}),T(E,E,!0,!1)),(ce?Promise.resolve(ce):fe(N,E)).catch(ee=>ke(ee)?ke(ee,te.NAVIGATION_GUARD_REDIRECT)?ee:le(ee):Y(ee,N,E)).then(ee=>{if(ee){if(ke(ee,te.NAVIGATION_GUARD_REDIRECT))return w(J({replace:L},b(ee.to),{state:typeof ee.to=="object"?J({},G,ee.to.state):G,force:H}),l||N)}else ee=we(N,E,!0,L,G);return me(N,E,ee),ee})}function W(i,l){const y=k(i,l);return y?Promise.reject(y):Promise.resolve()}function Q(i){const l=se.values().next().value;return l&&typeof l.runWithContext=="function"?l.runWithContext(i):i()}function fe(i,l){let y;const[E,G,H]=us(i,l);y=st(E.reverse(),"beforeRouteLeave",i,l);for(const M of E)M.leaveGuards.forEach(N=>{y.push(Pe(N,i,l))});const L=W.bind(null,i,l);return y.push(L),_e(y).then(()=>{y=[];for(const M of d.list())y.push(Pe(M,i,l));return y.push(L),_e(y)}).then(()=>{y=st(G,"beforeRouteUpdate",i,l);for(const M of G)M.updateGuards.forEach(N=>{y.push(Pe(N,i,l))});return y.push(L),_e(y)}).then(()=>{y=[];for(const M of H)if(M.beforeEnter)if(ye(M.beforeEnter))for(const N of M.beforeEnter)y.push(Pe(N,i,l));else y.push(Pe(M.beforeEnter,i,l));return y.push(L),_e(y)}).then(()=>(i.matched.forEach(M=>M.enterCallbacks={}),y=st(H,"beforeRouteEnter",i,l,Q),y.push(L),_e(y))).then(()=>{y=[];for(const M of v.list())y.push(Pe(M,i,l));return y.push(L),_e(y)}).catch(M=>ke(M,te.NAVIGATION_CANCELLED)?M:Promise.reject(M))}function me(i,l,y){g.list().forEach(E=>Q(()=>E(i,l,y)))}function we(i,l,y,E,G){const H=k(i,l);if(H)return H;const L=l===Ie,M=$e?history.state:{};y&&(E||L?r.replace(i.fullPath,J({scroll:L&&M&&M.scroll},G)):r.push(i.fullPath,G)),u.value=i,T(i,l,y,L),le()}let ae;function be(){ae||(ae=r.listen((i,l,y)=>{if(!ge.listening)return;const E=U(i),G=x(E,ge.currentRoute.value);if(G){w(J(G,{replace:!0,force:!0}),E).catch(Me);return}h=E;const H=u.value;$e&&ts(bt(H.fullPath,y.delta),We()),fe(E,H).catch(L=>ke(L,te.NAVIGATION_ABORTED|te.NAVIGATION_CANCELLED)?L:ke(L,te.NAVIGATION_GUARD_REDIRECT)?(w(J(b(L.to),{force:!0}),E).then(M=>{ke(M,te.NAVIGATION_ABORTED|te.NAVIGATION_DUPLICATED)&&!y.delta&&y.type===at.pop&&r.go(-1,!1)}).catch(Me),Promise.reject()):(y.delta&&r.go(-y.delta,!1),Y(L,E,H))).then(L=>{L=L||we(E,H,!1),L&&(y.delta&&!ke(L,te.NAVIGATION_CANCELLED)?r.go(-y.delta,!1):y.type===at.pop&&ke(L,te.NAVIGATION_ABORTED|te.NAVIGATION_DUPLICATED)&&r.go(-1,!1)),me(E,H,L)}).catch(Me)}))}let Ce=Be(),z=Be(),p;function Y(i,l,y){le(i);const E=z.list();return E.length?E.forEach(G=>G(i,l,y)):console.error(i),Promise.reject(i)}function K(){return p&&u.value!==Ie?Promise.resolve():new Promise((i,l)=>{Ce.add([i,l])})}function le(i){return p||(p=!i,be(),Ce.list().forEach(([l,y])=>i?y(i):l()),Ce.reset()),i}function T(i,l,y,E){const{scrollBehavior:G}=e;if(!$e||!G)return Promise.resolve();const H=!y&&ns(bt(i.fullPath,0))||(E||!y)&&history.state&&history.state.scroll||null;return dn().then(()=>G(i,l,H)).then(L=>L&&es(L)).catch(L=>Y(L,i,l))}const ue=i=>r.go(i);let X;const se=new Set,ge={currentRoute:u,listening:!0,addRoute:c,removeRoute:R,clearRoutes:t.clearRoutes,hasRoute:D,getRoutes:O,resolve:U,options:e,push:j,replace:q,go:ue,back:()=>ue(-1),forward:()=>ue(1),beforeEach:d.add,beforeResolve:v.add,afterEach:g.add,onError:z.add,isReady:K,install(i){i.component("RouterLink",xs),i.component("RouterView",Ts),i.config.globalProperties.$router=ge,Object.defineProperty(i.config.globalProperties,"$route",{enumerable:!0,get:()=>B(u)}),$e&&!X&&u.value===Ie&&(X=!0,j(r.location).catch(E=>{}));const l={};for(const E in Ie)Object.defineProperty(l,E,{get:()=>u.value[E],enumerable:!0});i.provide(Je,ge),i.provide(mt,cn(l)),i.provide(lt,u);const y=i.unmount;se.add(i),i.unmount=function(){se.delete(i),se.size<1&&(h=Ie,ae&&ae(),ae=null,u.value=Ie,X=!1,p=!1),y()}}};function _e(i){return i.reduce((l,y)=>l.then(()=>Q(y)),Promise.resolve())}return ge}function Qe(){return Oe(Je)}function Yt(e){return Oe(mt)}class $s{connection=null;username=null;onConnectionStateChanged=null;async startConnection(){const t=sessionStorage.getItem("token"),s=JSON.parse(sessionStorage.getItem("user")||"{}");if(this.username=s.username,this.currentToken=t,this.currentUsername=this.username,!(!this.currentToken||!this.currentUsername)&&this.connection?.state!==xe.Connected&&this.connection?.state!==xe.Connecting&&this.connection?.state!==xe.Reconnecting){if(this.onConnectionStateChanged&&this.onConnectionStateChanged(!1,"ËøûÊé•‰∏≠...",!0),this.connection)try{await this.connection.stop()}catch{}this.connection=new En().withUrl("http://csp-manege.top:5002/notificationHub",{accessTokenFactory:()=>this.currentToken,skipNegotiation:!0,transport:In.WebSockets}).withAutomaticReconnect({nextRetryDelayInMilliseconds:n=>n.elapsedMilliseconds<6e4?Math.random()*5e3:null}).configureLogging(Pn.Information).build(),this.connection.on("ReceiveNotification",(n,r)=>{fn({title:"üì¢ Êñ∞Â∑•ÂçïÈÄöÁü•",message:n,type:"success",duration:8e3,position:"top-right",showClose:!0,onClick:()=>{r?.orderId&&Re.push(`/orders/${r.orderId}`)}}),this.playNotificationSound()}),this.connection.on("Pong",n=>{}),this.connection.onreconnecting(n=>{this.onConnectionStateChanged&&this.onConnectionStateChanged(!1,"ÈáçËøû‰∏≠...",!0)}),this.connection.onreconnected(n=>{this.onConnectionStateChanged&&this.onConnectionStateChanged(!0,"Â∑≤ËøûÊé•",!1)}),this.connection.onclose(n=>{this.onConnectionStateChanged&&this.onConnectionStateChanged(!1,"ËøûÊé•Â∑≤Êñ≠ÂºÄ",!1)});try{await this.connection.start(),this.onConnectionStateChanged&&this.onConnectionStateChanged(!0,"Â∑≤ËøûÊé•",!1),this.startHeartbeat()}catch{this.onConnectionStateChanged&&this.onConnectionStateChanged(!1,"ËøûÊé•Â§±Ë¥•",!1),setTimeout(()=>this.startConnection(),5e3)}}}async stopConnection(){if(this.connection)try{this.stopHeartbeat(),await this.connection.stop()}catch{}}startHeartbeat(){this.heartbeatInterval=setInterval(()=>{this.connection?.state===xe.Connected&&this.connection.invoke("Ping").catch(t=>{})},3e4)}stopHeartbeat(){this.heartbeatInterval&&(clearInterval(this.heartbeatInterval),this.heartbeatInterval=null)}playNotificationSound(){try{const t=new Audio("/notification.mp3");t.volume=.3,t.play().catch(()=>{})}catch{}}}const re=new $s,gt=Ke.create({baseURL:"http://csp-manege.top:5002/api",timeout:5e3});gt.interceptors.request.use(e=>{const t=sessionStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e});gt.interceptors.response.use(e=>e,e=>(e.response?.status===401&&!e.config.url.includes("/auth/login")&&(console.warn("üîê Token Â∑≤Â§±ÊïàÔºåÊ∏ÖÈô§ÁôªÂΩï‰ø°ÊÅØ"),sessionStorage.removeItem("token"),sessionStorage.removeItem("user"),P.warning("üîí ÁôªÂΩïÂ∑≤ËøáÊúüÔºåËØ∑ÈáçÊñ∞ÁôªÂΩï"),Re.push("/login")),Promise.reject(e)));const Ds=async(e,t)=>{const s=await gt.post("/auth/login",{username:e,password:t});sessionStorage.setItem("token",s.data.token),sessionStorage.setItem("user",JSON.stringify(s.data.user)),sessionStorage.setItem("permissions",JSON.stringify(s.data.permissions)),sessionStorage.removeItem("orderFilters"),console.log("üíæ ÁôªÂΩïÊàêÂäüÔºåÂ∑≤Ê∏ÖÈô§Á≠õÈÄâÊù°‰ª∂");try{await re.startConnection()}catch(n){console.error("SignalR ËøûÊé•Â§±Ë¥•:",n)}return P.success(`Ê¨¢ËøéÂõûÊù•Ôºå${s.data.user.username}ÔºÅ`),Re.push("/orders"),s},Xt=()=>{re.stopConnection(),sessionStorage.clear(),P.info("Â∑≤ÈÄÄÂá∫ÁôªÂΩï"),Re.push("/")},Ve=(e,t)=>{const s=e.__vccOpts||e;for(const[n,r]of t)s[n]=r;return s},zs={class:"login-wrapper"},Bs={class:"login-card"},Ms={class:"login-header"},Ls={class:"login-footer"},Gs={__name:"Login",setup(e){const t=V(),s=V(!1),n=V(!1),r=Ee({username:"",password:""}),d=Ee({username:[{required:!0,message:"ËØ∑ËæìÂÖ•Áî®Êà∑ÂêçÊàñÊâãÊú∫Âè∑",trigger:"blur"}],password:[{required:!0,message:"ËØ∑ËæìÂÖ•ÂØÜÁ†Å",trigger:"blur"}]}),v=async()=>{await t.value.validate(async g=>{if(g){s.value=!0;try{await Ds(r.username,r.password)}catch(u){P.error(u.response?.data?.message||"ÁôªÂΩïÂ§±Ë¥•ÔºåËØ∑Ê£ÄÊü•Áî®Êà∑ÂêçÂíåÂØÜÁ†Å")}finally{s.value=!1}}})};return(g,u)=>{const h=A("el-icon"),_=A("el-input"),m=A("el-form-item"),f=A("el-button"),c=A("el-form"),R=A("el-link");return $(),ne("div",zs,[C("div",Bs,[C("div",Ms,[o(h,{size:60,color:"#409eff"},{default:a(()=>[o(B(pn))]),_:1}),u[4]||(u[4]=C("h1",null,"Êô∫ÊÖßÂÆøËàçÊä•‰øÆÂπ≥Âè∞",-1)),u[5]||(u[5]=C("p",null,"ËÆ©Áª¥‰øÆÊõ¥È´òÊïàÔºåËÆ©ÁîüÊ¥ªÊõ¥ÁæéÂ•Ω",-1))]),o(c,{model:r,rules:d,ref_key:"formRef",ref:t,class:"login-form"},{default:a(()=>[o(m,{prop:"username"},{default:a(()=>[o(_,{modelValue:r.username,"onUpdate:modelValue":u[0]||(u[0]=O=>r.username=O),placeholder:"ËØ∑ËæìÂÖ•Áî®Êà∑Âêç/ÊâãÊú∫Âè∑","prefix-icon":B(Ut),size:"large"},null,8,["modelValue","prefix-icon"])]),_:1}),o(m,{prop:"password"},{default:a(()=>[o(_,{modelValue:r.password,"onUpdate:modelValue":u[2]||(u[2]=O=>r.password=O),type:n.value?"text":"password",placeholder:"ËØ∑ËæìÂÖ•ÂØÜÁ†Å","prefix-icon":B(gn),size:"large",onKeyup:mn(v,["enter"])},{suffix:a(()=>[o(h,{class:"password-toggle",onClick:u[1]||(u[1]=O=>n.value=!n.value),style:{cursor:"pointer",fontSize:"18px"}},{default:a(()=>[n.value?($(),Z(B(vn),{key:1})):($(),Z(B($t),{key:0}))]),_:1})]),_:1},8,["modelValue","type","prefix-icon"])]),_:1}),o(m,null,{default:a(()=>[o(f,{type:"primary",onClick:v,loading:s.value,size:"large",class:"login-btn"},{default:a(()=>[...u[6]||(u[6]=[S(" Áôª ÂΩï ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules"]),C("div",Ls,[o(R,{type:"primary",onClick:u[3]||(u[3]=O=>g.$message.info("ËØ∑ËÅîÁ≥ªÁÆ°ÁêÜÂëòÊ≥®ÂÜåË¥¶Âè∑"))},{default:a(()=>[...u[7]||(u[7]=[S(" Ê≤°ÊúâË¥¶Âè∑ÔºüÂéªÊ≥®ÂÜå ",-1)])]),_:1})])]),u[8]||(u[8]=C("div",{class:"login-bg"},null,-1))])}}},Hs=Ve(Gs,[["__scopeId","data-v-1dc17cb0"]]),he=Ke.create({baseURL:"http://csp-manege.top:5002/api",timeout:5e3});he.interceptors.request.use(e=>{const t=sessionStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e});he.interceptors.response.use(e=>e,e=>(e.response?.status===401&&(console.warn("üîê Token Â∑≤Â§±ÊïàÔºåÊ∏ÖÈô§ÁôªÂΩï‰ø°ÊÅØ"),sessionStorage.removeItem("token"),sessionStorage.removeItem("user"),P.warning("üîí ÁôªÂΩïÂ∑≤ËøáÊúüÔºåËØ∑ÈáçÊñ∞ÁôªÂΩï"),Re.push("/login")),Promise.reject(e)));const qs=e=>he.get("/orders",{params:e}),Fs=e=>he.get(`/orders/${e}`),js=e=>he.post("/orders",e),Ks=e=>he.post("/file/upload",e,{headers:{"Content-Type":"multipart/form-data"}}),Zt=(e,t)=>typeof t=="string"?he.patch(`/orders/${e}/status`,{status:t}):he.patch(`/orders/${e}/status`,t),it=()=>he.get("/orders/maintainers"),en=(e,t)=>he.post(`/orders/${e}/assign`,{maintainerId:t}),Ws=e=>he.delete(`/orders/${e}`),Js=(e,t)=>he.put(`/orders/${e}/reassign`,{maintainerId:t}),Te=Ke.create({baseURL:"http://csp-manege.top:5002/api",timeout:5e3});Te.interceptors.request.use(e=>{const t=sessionStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e});Te.interceptors.response.use(e=>e,e=>(e.response?.status===401&&(console.warn("üîê Token Â∑≤Â§±ÊïàÔºåÊ∏ÖÈô§ÁôªÂΩï‰ø°ÊÅØ"),sessionStorage.removeItem("token"),sessionStorage.removeItem("user"),P.warning("üîí ÁôªÂΩïÂ∑≤ËøáÊúüÔºåËØ∑ÈáçÊñ∞ÁôªÂΩï"),Re.push("/login")),Promise.reject(e)));const Qs=e=>Te.get("/notifications",{params:e}),tn=()=>Te.get("/notifications/unread-count"),Ys=e=>Te.put(`/notifications/${e}/read`),Xs=()=>Te.put("/notifications/read-all"),Zs=e=>Te.delete(`/notifications/${e}`),eo={class:"order-container"},to={class:"card-header"},no={class:"header-title"},so={class:"header-actions"},oo={class:"user-dropdown"},ao={class:"username"},ro={class:"user-info"},lo={class:"info-value"},io={class:"user-info"},uo={class:"info-value"},co={class:"search-bar"},fo={class:"mobile-order-list"},po={key:0,style:{padding:"40px","text-align":"center",color:"#909399"}},mo={class:"mobile-order-header"},go={class:"mobile-order-id"},vo={class:"mobile-order-body"},ho={class:"mobile-info-row"},_o={class:"mobile-info-value"},yo={key:0,class:"mobile-info-row"},wo={class:"mobile-info-value"},bo={class:"mobile-info-row"},Co={class:"mobile-info-value"},So={class:"mobile-order-actions"},Ro={class:"pagination"},ko={__name:"OrderList",setup(e){const t=Qe(),s=V(!1),n=V([]),r=V(0),d=V(1),v=V(10),g=V(0),u=V(!0),h=V(!1),_=V("ËøûÊé•‰∏≠..."),m=sessionStorage.getItem("orderFilters"),f=V(m?JSON.parse(m):{status:"",scope:"my"}),c=JSON.parse(sessionStorage.getItem("user")||"{}"),R=c.role||"",O=()=>c.username?c.username.charAt(0).toUpperCase():"U",D=z=>({Admin:"üëë ÁÆ°ÁêÜÂëò",Maintainer:"üîß Áª¥‰øÆÂ∑•",Student:"üéì Â≠¶Áîü"})[z]||z,U=z=>{z==="logout"?be():z==="settings"&&t.push("/settings")},b=z=>JSON.parse(sessionStorage.getItem("permissions")||"[]").includes(z),k=z=>({Pending:"warning",Processing:"primary",Completed:"success"})[z]||"info",j=z=>({Pending:"ÂæÖÂ§ÑÁêÜ",Processing:"Â§ÑÁêÜ‰∏≠",Completed:"Â∑≤ÂÆåÊàê"})[z]||z,q=z=>{if(!z)return"-";const p=new Date(z),Y=p.getFullYear(),K=String(p.getMonth()+1).padStart(2,"0"),le=String(p.getDate()).padStart(2,"0"),T=String(p.getHours()).padStart(2,"0"),ue=String(p.getMinutes()).padStart(2,"0");return`${Y}-${K}-${le} ${T}:${ue}`},x=async()=>{if(!sessionStorage.getItem("token")){console.warn("Êú™ÁôªÂΩïÔºåË∑≥ËøáÂä†ËΩΩÂ∑•ÂçïÂàóË°®");return}s.value=!0;try{const p={page:d.value,pageSize:v.value,status:f.value.status};R==="Maintainer"&&f.value.scope==="my"&&(p.assignedToMe=!0),R==="Student"&&(p.assignedToMe=!0);const Y=await qs(p);n.value=Y.data.items,r.value=Y.data.total}catch(p){p.response?.status===401?(console.warn("Token Â∑≤Â§±ÊïàÔºåËØ∑ÈáçÊñ∞ÁôªÂΩï"),sessionStorage.removeItem("token"),sessionStorage.removeItem("user"),P.warning("ÁôªÂΩïÂ∑≤ËøáÊúüÔºåËØ∑ÈáçÊñ∞ÁôªÂΩï"),t.push("/login")):P.error("Âä†ËΩΩÂ∑•ÂçïÂ§±Ë¥•Ôºö"+(p.response?.data?.message||p.message))}finally{s.value=!1}},w=async()=>{if(!sessionStorage.getItem("token")){console.warn("Êú™ÁôªÂΩïÔºåË∑≥ËøáÂä†ËΩΩÊú™ËØªÊ∂àÊÅØÊï∞");return}try{const p=await tn();g.value=p.data.count}catch(p){p.response?.status===401?(console.warn("Token Â∑≤Â§±ÊïàÔºåËØ∑ÈáçÊñ∞ÁôªÂΩï"),sessionStorage.removeItem("token"),sessionStorage.removeItem("user"),P.warning("ÁôªÂΩïÂ∑≤ËøáÊúüÔºåËØ∑ÈáçÊñ∞ÁôªÂΩï"),t.push("/login")):console.error("Âä†ËΩΩÊú™ËØªÊ∂àÊÅØÊï∞Â§±Ë¥•",p)}},W=()=>{d.value=1,x()},Q=()=>{f.value.status="",R==="Maintainer"&&(f.value.scope="my"),W()},fe=z=>{v.value=z,x()},me=z=>{d.value=z,x()},we=()=>{t.push("/orders/create")},ae=z=>{P.info(`ÊåáÊ¥æÂ∑•ÂçïÔºö${z.title}`)},be=async()=>{try{await Ae.confirm("Á°ÆÂÆöË¶ÅÈÄÄÂá∫ÁôªÂΩïÂêóÔºü","ÊèêÁ§∫",{confirmButtonText:"Á°ÆÂÆö",cancelButtonText:"ÂèñÊ∂à",type:"warning"}),Xt()}catch{}},Ce=async(z,p)=>{if(z==="delete")try{await Ae.confirm(`Á°ÆÂÆöË¶ÅÂà†Èô§Â∑•Âçï„Ää${p.title}„ÄãÂêóÔºüÊ≠§Êìç‰Ωú‰∏çÂèØÊÅ¢Â§çÔºÅ`,"Ë≠¶Âëä",{confirmButtonText:"Á°ÆÂÆöÂà†Èô§",cancelButtonText:"ÂèñÊ∂à",type:"error",confirmButtonClass:"el-button--danger"}),await Ws(p.id),P.success("Â∑•ÂçïÂ∑≤Âà†Èô§"),x()}catch(Y){Y!=="cancel"&&P.error("Âà†Èô§Â§±Ë¥•Ôºö"+(Y.response?.data?.message||Y.message))}else if(z==="changeStatus")try{let Y=[];if(R==="Admin")try{Y=(await it()).data}catch(T){console.error("Ëé∑ÂèñÁª¥‰øÆÂ∑•ÂàóË°®Â§±Ë¥•:",T)}const K=Ee({selectedStatus:p.status,selectedMaintainer:null,showMaintainerSelect:R==="Admin"&&!p.assignedTo&&(p.status==="Pending"||p.assignedTo===null)}),le=[{value:"Pending",label:"ÂæÖÂ§ÑÁêÜ",color:"#f39c12"},{value:"Processing",label:"Â§ÑÁêÜ‰∏≠",color:"#409eff"},{value:"Completed",label:"Â∑≤ÂÆåÊàê",color:"#67c23a"}];await Ae({title:"‰øÆÊîπÂ∑•ÂçïÁä∂ÊÄÅ",message:()=>de("div",{style:"padding: 20px 10px"},[de("div",{style:"margin-bottom: 20px; padding: 12px; background: linear-gradient(135deg, #667eea15 0%, #764ba215 100%); border-radius: 8px; color: #606266; font-size: 14px"},`ÂΩìÂâçÁä∂ÊÄÅÔºö${j(p.status)}`),de("div",{style:"margin-bottom: 15px; font-weight: 600; font-size: 15px; color: #303133"},"ÈÄâÊã©Êñ∞Áä∂ÊÄÅÔºö"),de(qe,{modelValue:K.selectedStatus,"onUpdate:modelValue":T=>{K.selectedStatus=T,K.showMaintainerSelect=R==="Admin"&&!p.assignedTo&&T==="Processing"},placeholder:"ËØ∑ÈÄâÊã©Áä∂ÊÄÅ",style:"width: 100%",size:"large"},()=>le.map(T=>de(Ue,{key:T.value,label:T.label,value:T.value},()=>[de("span",{style:`display: inline-block; width: 10px; height: 10px; border-radius: 50%; background: ${T.color}; margin-right: 8px`}),T.label]))),K.showMaintainerSelect?de("div",{style:"margin-top: 20px"},[de("div",{style:"margin-bottom: 15px; font-weight: 600; font-size: 15px; color: #303133"},"ÂêåÊó∂ÂàÜÈÖçÁª¥‰øÆÂ∑•Ôºö"),de(qe,{modelValue:K.selectedMaintainer,"onUpdate:modelValue":T=>{K.selectedMaintainer=T},placeholder:"ËØ∑ÈÄâÊã©Áª¥‰øÆÂ∑•ÔºàÂèØÈÄâÔºâ",style:"width: 100%",size:"large",clearable:!0},()=>Y.map(T=>de(Ue,{key:T.id,label:T.username,value:T.id},()=>`üîß ${T.username}`)))]):null]),showCancelButton:!0,confirmButtonText:"Á°ÆÂÆö",cancelButtonText:"ÂèñÊ∂à",beforeClose:async(T,ue,X)=>{if(T==="confirm")if(K.selectedStatus!==p.status||K.selectedMaintainer)try{const se={status:K.selectedStatus};K.selectedMaintainer&&(se.assignTo=K.selectedMaintainer),await Zt(p.id,se),P.success("Áä∂ÊÄÅ‰øÆÊîπÊàêÂäü"),x(),X()}catch(se){P.error("‰øÆÊîπÂ§±Ë¥•Ôºö"+(se.response?.data?.message||se.message))}else X();else X()}})}catch{}else if(z==="assign"||z==="reassign")try{const K=(await it()).data;if(K.length===0){P.warning("ÊöÇÊó†ÂèØÁî®Áª¥‰øÆÂ∑•");return}const le=Ee({selectedId:p.assignedTo||null});await Ae({title:z==="reassign"?"üîß Êõ¥Êç¢Áª¥‰øÆÂ∑•":"üë§ ÊåáÊ¥æÁª¥‰øÆÂ∑•",message:()=>de("div",{style:"padding: 20px 10px"},[de("div",{style:"margin-bottom: 20px; padding: 12px; background: linear-gradient(135deg, #667eea15 0%, #764ba215 100%); border-radius: 8px; color: #606266; font-size: 14px"},`Â∑•ÂçïÔºö${p.title}`),de("div",{style:"margin-bottom: 15px; font-weight: 600; font-size: 15px; color: #303133"},"ÈÄâÊã©Áª¥‰øÆÂ∑•Ôºö"),de(qe,{modelValue:le.selectedId,"onUpdate:modelValue":T=>{le.selectedId=T},placeholder:"ËØ∑ÈÄâÊã©Áª¥‰øÆÂ∑•",style:"width: 100%",size:"large"},()=>K.map(T=>de(Ue,{key:T.id,label:T.username,value:T.id},()=>`üîß ${T.username}`)))]),showCancelButton:!0,confirmButtonText:"Á°ÆÂÆö",cancelButtonText:"ÂèñÊ∂à",beforeClose:async(T,ue,X)=>{if(T==="confirm"){if(!le.selectedId){P.warning("ËØ∑ÈÄâÊã©Áª¥‰øÆÂ∑•");return}try{z==="reassign"?(await Js(p.id,le.selectedId),P.success("Â∑≤Êõ¥Êç¢Áª¥‰øÆÂ∑•")):(await en(p.id,le.selectedId),P.success("ÊåáÊ¥æÊàêÂäü")),x(),X()}catch(se){P.error("Êìç‰ΩúÂ§±Ë¥•Ôºö"+(se.response?.data?.message||se.message))}}else X()}})}catch{}};return ut(f,z=>{sessionStorage.setItem("orderFilters",JSON.stringify(z)),console.log("üíæ Â∑≤‰øùÂ≠òÁ≠õÈÄâÊù°‰ª∂Ôºö",z)},{deep:!0}),He(async()=>{if(!sessionStorage.getItem("token")){P.error("ËØ∑ÂÖàÁôªÂΩï"),t.push("/login");return}if(x(),w(),re.onConnectionStateChanged=(p,Y)=>{h.value=p,_.value=Y},re.connection?.state===xe.Connected&&(h.value=!0,_.value="Â∑≤ËøûÊé•"),re.connection){const p=(Y,K)=>{console.log("üì¢ OrderList Êî∂Âà∞Â∑•ÂçïÈÄöÁü•ÔºåËá™Âä®Âà∑Êñ∞ÂàóË°®",K),setTimeout(()=>{x(),w()},1e3)};re.connection.on("ReceiveNotification",p),re._orderListHandler=p}}),hn(()=>{re.connection&&re._orderListHandler&&(re.connection.off("ReceiveNotification",re._orderListHandler),delete re._orderListHandler)}),(z,p)=>{const Y=A("el-tooltip"),K=A("el-button"),le=A("el-badge"),T=A("el-avatar"),ue=A("el-icon"),X=A("el-dropdown-item"),se=A("el-dropdown-menu"),ge=A("el-dropdown"),_e=A("el-radio-button"),i=A("el-form-item"),l=A("el-form"),y=A("el-table-column"),E=A("el-tag"),G=A("el-table"),H=A("el-pagination"),L=A("el-card"),M=je("loading");return $(),ne("div",eo,[o(L,{class:"order-card",shadow:"hover"},{header:a(()=>[C("div",to,[C("h2",no,[p[6]||(p[6]=S(" üõ†Ô∏è Â∑•ÂçïÁÆ°ÁêÜ ",-1)),u.value?($(),ne("span",{key:0,class:ft(["connection-status",{connected:h.value}])},[o(Y,{content:_.value},{default:a(()=>[...p[5]||(p[5]=[C("span",{class:"status-dot"},null,-1)])]),_:1},8,["content"])],2)):oe("",!0)]),C("div",so,[o(le,{value:g.value,hidden:g.value===0,class:"message-badge"},{default:a(()=>[o(K,{type:"info",circle:"",onClick:p[0]||(p[0]=N=>z.$router.push("/notifications")),title:"Ê∂àÊÅØ‰∏≠ÂøÉ"},{default:a(()=>[...p[7]||(p[7]=[S(" üì¨ ",-1)])]),_:1})]),_:1},8,["value","hidden"]),o(K,{type:"primary",icon:B(wn),onClick:we},{default:a(()=>[...p[8]||(p[8]=[S(" Êñ∞Âª∫Â∑•Âçï ",-1)])]),_:1},8,["icon"]),o(ge,{onCommand:U,trigger:"click"},{dropdown:a(()=>[o(se,null,{default:a(()=>[o(X,{disabled:""},{default:a(()=>[C("div",ro,[p[9]||(p[9]=C("div",{class:"info-label"},"üë§ Áî®Êà∑Âêç",-1)),C("div",lo,F(B(c).username),1)])]),_:1}),o(X,{disabled:""},{default:a(()=>[C("div",io,[p[10]||(p[10]=C("div",{class:"info-label"},"üé≠ ËßíËâ≤",-1)),C("div",uo,F(D(B(c).role)),1)])]),_:1}),o(X,{disabled:""},{default:a(()=>[...p[11]||(p[11]=[C("div",{class:"user-info"},[C("div",{class:"info-label"},"üìû ÊâãÊú∫Âè∑"),C("div",{class:"info-value"},"138****8888")],-1)])]),_:1}),o(X,{divided:"",command:"settings"},{default:a(()=>[o(ue,null,{default:a(()=>[o(B(Dt))]),_:1}),p[12]||(p[12]=S(" ËÆæÁΩÆ ",-1))]),_:1}),o(X,{command:"logout"},{default:a(()=>[o(ue,null,{default:a(()=>[o(B(zt))]),_:1}),p[13]||(p[13]=S(" ÈÄÄÂá∫ÁôªÂΩï ",-1))]),_:1})]),_:1})]),default:a(()=>[C("div",oo,[o(T,{size:40,class:"user-avatar"},{default:a(()=>[S(F(O()),1)]),_:1}),C("span",ao,F(B(c).username),1),o(ue,{class:"el-icon--right"},{default:a(()=>[o(B(Fe))]),_:1})])]),_:1})])])]),default:a(()=>[C("div",co,[o(l,{inline:!0,model:f.value,class:"search-form"},{default:a(()=>[B(R)==="Maintainer"?($(),Z(i,{key:0,label:"Â∑•ÂçïËåÉÂõ¥"},{default:a(()=>[o(B(_n),{modelValue:f.value.scope,"onUpdate:modelValue":p[1]||(p[1]=N=>f.value.scope=N),onChange:W},{default:a(()=>[o(_e,{value:"my"},{default:a(()=>[...p[14]||(p[14]=[S("üë§ ÊàëÁöÑÂ∑•Âçï",-1)])]),_:1}),o(_e,{value:"all"},{default:a(()=>[...p[15]||(p[15]=[S("üåê ÂÖ®ÈÉ®Â∑•Âçï",-1)])]),_:1})]),_:1},8,["modelValue"])]),_:1})):oe("",!0),o(i,{label:"Áä∂ÊÄÅ"},{default:a(()=>[o(B(qe),{modelValue:f.value.status,"onUpdate:modelValue":p[2]||(p[2]=N=>f.value.status=N),placeholder:"ËØ∑ÈÄâÊã©",clearable:"",style:{width:"150px"},onChange:W},{default:a(()=>[o(B(Ue),{label:"ÂæÖÂ§ÑÁêÜ",value:"Pending"}),o(B(Ue),{label:"Â§ÑÁêÜ‰∏≠",value:"Processing"}),o(B(Ue),{label:"Â∑≤ÂÆåÊàê",value:"Completed"})]),_:1},8,["modelValue"])]),_:1}),o(i,null,{default:a(()=>[o(K,{icon:B(yn),onClick:Q},{default:a(()=>[...p[16]||(p[16]=[S("ÈáçÁΩÆ",-1)])]),_:1},8,["icon"])]),_:1})]),_:1},8,["model"])]),Le(($(),Z(G,{data:n.value,border:"",stripe:"",class:"order-table","header-cell-style":{background:"#f5f7fa",color:"#606266"}},{default:a(()=>[o(y,{prop:"id",label:"Â∑•ÂçïÂè∑",width:"80",align:"center"}),o(y,{prop:"title",label:"Êä•‰øÆÊ†áÈ¢ò","min-width":"150","show-overflow-tooltip":""}),B(R)!=="Student"?($(),Z(y,{key:0,prop:"creator",label:"Êä•‰øÆ‰∫∫",width:"100",align:"center"})):oe("",!0),o(y,{prop:"createTime",label:"Êä•‰øÆÊó∂Èó¥",width:"160",align:"center"},{default:a(({row:N})=>[S(F(q(N.createTime)),1)]),_:1}),o(y,{prop:"status",label:"Áä∂ÊÄÅ",width:"100",align:"center"},{default:a(({row:N})=>[o(E,{type:k(N.status)},{default:a(()=>[S(F(j(N.status)),1)]),_:2},1032,["type"])]),_:1}),o(y,{label:"Êìç‰Ωú",width:B(R)==="Admin"?320:180,align:"center",fixed:"right"},{default:a(({row:N})=>[o(K,{type:"primary",size:"small",icon:B($t),onClick:ce=>z.$router.push(`/orders/${N.id}`)},{default:a(()=>[...p[17]||(p[17]=[S("ËØ¶ÊÉÖ",-1)])]),_:1},8,["icon","onClick"]),B(R)==="Admin"?($(),Z(ge,{key:0,onCommand:ce=>Ce(ce,N),trigger:"click",style:{"margin-left":"8px"}},{dropdown:a(()=>[o(se,null,{default:a(()=>[o(X,{command:"changeStatus"},{default:a(()=>[...p[19]||(p[19]=[S(" üîÑ ‰øÆÊîπÁä∂ÊÄÅ ",-1)])]),_:1}),N.assignedTo?($(),Z(X,{key:0,command:"reassign"},{default:a(()=>[...p[20]||(p[20]=[S(" üîß Êõ¥Êç¢Áª¥‰øÆÂ∑• ",-1)])]),_:1})):($(),Z(X,{key:1,command:"assign"},{default:a(()=>[...p[21]||(p[21]=[S(" üë§ ÊåáÊ¥æÁª¥‰øÆÂ∑• ",-1)])]),_:1})),o(X,{command:"delete",divided:""},{default:a(()=>[...p[22]||(p[22]=[S(" üóëÔ∏è Âà†Èô§Â∑•Âçï ",-1)])]),_:1})]),_:2},1024)]),default:a(()=>[o(K,{type:"warning",size:"small",style:{"vertical-align":"middle"}},{default:a(()=>[p[18]||(p[18]=S(" ÁÆ°ÁêÜ ",-1)),o(ue,{class:"el-icon--right"},{default:a(()=>[o(B(Fe))]),_:1})]),_:1})]),_:2},1032,["onCommand"])):b("AssignOrder")?($(),Z(K,{key:1,type:"success",size:"small",icon:B(Ut),onClick:ce=>ae(N)},{default:a(()=>[...p[23]||(p[23]=[S(" ÊåáÊ¥æ ",-1)])]),_:1},8,["icon","onClick"])):oe("",!0)]),_:1},8,["width"])]),_:1},8,["data"])),[[M,s.value]]),Le(($(),ne("div",fo,[n.value.length===0?($(),ne("div",po," ÊöÇÊó†Â∑•ÂçïÊï∞ÊçÆ ")):oe("",!0),($(!0),ne(ct,null,dt(n.value,N=>($(),ne("div",{key:N.id,class:"mobile-order-item"},[C("div",mo,[C("span",go,"#"+F(N.id),1),o(E,{type:k(N.status),size:"large"},{default:a(()=>[S(F(j(N.status)),1)]),_:2},1032,["type"])]),C("div",vo,[C("div",ho,[p[24]||(p[24]=C("span",{class:"mobile-info-label"},"üìã Ê†áÈ¢ò",-1)),C("span",_o,F(N.title),1)]),B(R)!=="Student"?($(),ne("div",yo,[p[25]||(p[25]=C("span",{class:"mobile-info-label"},"üë§ Êä•‰øÆ‰∫∫",-1)),C("span",wo,F(N.creator),1)])):oe("",!0),C("div",bo,[p[26]||(p[26]=C("span",{class:"mobile-info-label"},"üìÖ Êó∂Èó¥",-1)),C("span",Co,F(q(N.createTime)),1)])]),C("div",So,[o(K,{type:"primary",size:"default",onClick:ce=>z.$router.push(`/orders/${N.id}`)},{default:a(()=>[...p[27]||(p[27]=[S(" üìÑ ËØ¶ÊÉÖ ",-1)])]),_:1},8,["onClick"]),B(R)==="Admin"?($(),Z(ge,{key:0,onCommand:ce=>Ce(ce,N),trigger:"click",style:{flex:"1"}},{dropdown:a(()=>[o(se,null,{default:a(()=>[o(X,{command:"changeStatus"},{default:a(()=>[...p[29]||(p[29]=[S(" üîÑ ‰øÆÊîπÁä∂ÊÄÅ ",-1)])]),_:1}),N.assignedTo?($(),Z(X,{key:0,command:"reassign"},{default:a(()=>[...p[30]||(p[30]=[S(" üîß Êõ¥Êç¢Áª¥‰øÆÂ∑• ",-1)])]),_:1})):($(),Z(X,{key:1,command:"assign"},{default:a(()=>[...p[31]||(p[31]=[S(" üë§ ÊåáÊ¥æÁª¥‰øÆÂ∑• ",-1)])]),_:1})),o(X,{command:"delete",divided:""},{default:a(()=>[...p[32]||(p[32]=[S(" üóëÔ∏è Âà†Èô§Â∑•Âçï ",-1)])]),_:1})]),_:2},1024)]),default:a(()=>[o(K,{type:"warning",size:"default",style:{width:"100%"}},{default:a(()=>[p[28]||(p[28]=S(" ‚öôÔ∏è ÁÆ°ÁêÜ ",-1)),o(ue,{class:"el-icon--right"},{default:a(()=>[o(B(Fe))]),_:1})]),_:1})]),_:2},1032,["onCommand"])):oe("",!0)])]))),128))])),[[M,s.value]]),C("div",Ro,[o(H,{"current-page":d.value,"onUpdate:currentPage":p[3]||(p[3]=N=>d.value=N),"page-size":v.value,"onUpdate:pageSize":p[4]||(p[4]=N=>v.value=N),"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",total:r.value,onSizeChange:fe,onCurrentChange:me},null,8,["current-page","page-size","total"])])]),_:1})])}}},Ao=Ve(ko,[["__scopeId","data-v-2d1400ea"]]);function Eo(e,t=.2){return new Promise((s,n)=>{if(!e.type.startsWith("image/")){n(new Error("ËØ∑ÈÄâÊã©ÂõæÁâáÊñá‰ª∂"));return}const r=new FileReader;r.onload=d=>{const v=new Image;v.onload=()=>{const g=document.createElement("canvas"),u=g.getContext("2d");let h=v.width,_=v.height;const m=1200;if(h>m||_>m){const f=Math.min(m/h,m/_);h*=f,_*=f}g.width=h,g.height=_,u.drawImage(v,0,0,h,_),g.toBlob(f=>{if(!f){n(new Error("ÂõæÁâáÂéãÁº©Â§±Ë¥•"));return}const c=f.size/(1024*1024);c>t?n(new Error(`ÂéãÁº©ÂêéÂõæÁâáÂ§ßÂ∞è‰∏∫${(c*1024).toFixed(2)}KBÔºå‰ªçË∂ÖËøá${t*1024}KBÈôêÂà∂`)):s(f)},"image/jpeg",.7)},v.onerror=()=>{n(new Error("ÂõæÁâáÂä†ËΩΩÂ§±Ë¥•"))},v.src=d.target.result},r.onerror=()=>{n(new Error("Êñá‰ª∂ËØªÂèñÂ§±Ë¥•"))},r.readAsDataURL(e)})}const Io={class:"create-container"},Po={key:0,class:"image-preview-container"},xo=["src"],No={class:"image-info"},Oo={__name:"OrderCreate",setup(e){const t=V(),s=V(!1),n=V(!1),r=V(""),d=V(""),v=V(""),g=Ee({title:"",location:"",description:""}),u=Ee({title:[{required:!0,message:"ËØ∑ËæìÂÖ•Êä•‰øÆÊ†áÈ¢ò",trigger:"blur"}],location:[{required:!0,message:"ËØ∑ËæìÂÖ•ÂÆøËàç‰ΩçÁΩÆ",trigger:"blur"}],description:[{required:!0,message:"ËØ∑ËæìÂÖ•ËØ¶ÁªÜÊèèËø∞",trigger:"blur"}]}),h=async f=>{try{n.value=!0;const c=f.raw.size,R=await Eo(f.raw,.2),O=new FormData;O.append("file",R,"image.jpg");const D=await Ks(O);d.value=D.data.url,r.value=URL.createObjectURL(R),v.value=`${(c/1024).toFixed(2)}KB ‚Üí ${(R.size/1024).toFixed(2)}KB`,P.success("ÂõæÁâá‰∏ä‰º†ÊàêÂäüÔºÅ")}catch(c){P.error("ÂõæÁâáÂ§ÑÁêÜÂ§±Ë¥•Ôºö"+c.message)}finally{n.value=!1}},_=()=>{r.value="",d.value="",v.value="",P.info("Â∑≤ÁßªÈô§ÂõæÁâá")},m=async()=>{await t.value.validate(async f=>{if(f){s.value=!0;try{const c={title:g.title,location:g.location,description:g.description,imageUrl:d.value||null},R=await js(c);P.success("Â∑•ÂçïÂàõÂª∫ÊàêÂäüÔºÅ"),Re.push("/orders")}catch(c){P.error("ÂàõÂª∫Â§±Ë¥•Ôºö"+(c.response?.data?.message||c.message))}finally{s.value=!1}}})};return(f,c)=>{const R=A("el-input"),O=A("el-form-item"),D=A("el-icon"),U=A("el-button"),b=A("el-upload"),k=A("el-form"),j=A("el-card");return $(),ne("div",Io,[o(j,{class:"create-card",shadow:"hover"},{header:a(()=>[...c[4]||(c[4]=[C("h2",null,"üìù Êñ∞Âª∫Â∑•Âçï",-1)])]),default:a(()=>[o(k,{model:g,rules:u,ref_key:"formRef",ref:t,"label-width":"100px",class:"create-form"},{default:a(()=>[o(O,{label:"Êä•‰øÆÊ†áÈ¢ò",prop:"title"},{default:a(()=>[o(R,{modelValue:g.title,"onUpdate:modelValue":c[0]||(c[0]=q=>g.title=q),placeholder:"‰æãÂ¶ÇÔºöÂÆøËàçÁÅØÂùè‰∫Ü",size:"large"},null,8,["modelValue"])]),_:1}),o(O,{label:"ÂÆøËàç‰ΩçÁΩÆ",prop:"location"},{default:a(()=>[o(R,{modelValue:g.location,"onUpdate:modelValue":c[1]||(c[1]=q=>g.location=q),placeholder:"‰æãÂ¶ÇÔºö3Âè∑Ê•º301",size:"large"},null,8,["modelValue"])]),_:1}),o(O,{label:"ËØ¶ÁªÜÊèèËø∞",prop:"description"},{default:a(()=>[o(R,{modelValue:g.description,"onUpdate:modelValue":c[2]||(c[2]=q=>g.description=q),type:"textarea",rows:4,placeholder:"ËØ∑ËØ¶ÁªÜÊèèËø∞ÈóÆÈ¢ò...",size:"large"},null,8,["modelValue"])]),_:1}),o(O,{label:"‰∏ä‰º†ÂõæÁâá"},{default:a(()=>[o(b,{action:"#","auto-upload":!1,"on-change":h,"show-file-list":!1,accept:"image/*"},{default:a(()=>[o(U,{type:"primary",disabled:n.value},{default:a(()=>[n.value?($(),Z(D,{key:0},{default:a(()=>[o(B(bn))]),_:1})):oe("",!0),S(" "+F(n.value?"ÂéãÁº©‰∏ä‰º†‰∏≠...":"ÈÄâÊã©ÂõæÁâá"),1)]),_:1},8,["disabled"])]),_:1}),r.value?($(),ne("div",Po,[C("img",{src:r.value,class:"image-preview"},null,8,xo),o(U,{type:"danger",size:"small",onClick:_,class:"remove-btn"},{default:a(()=>[...c[5]||(c[5]=[S(" √ó ",-1)])]),_:1}),C("div",No,[C("span",null,"üíæ "+F(v.value),1)])])):oe("",!0),c[6]||(c[6]=C("div",{class:"upload-tip"}," ÊîØÊåÅjpg/png/gifÊ†ºÂºèÔºåÂõæÁâáÂ∞ÜËá™Âä®ÂéãÁº©Ëá≥200KB‰ª•ÂÜÖ ",-1))]),_:1}),o(O,null,{default:a(()=>[o(U,{type:"primary",onClick:m,loading:s.value,size:"large"},{default:a(()=>[...c[7]||(c[7]=[S(" Êèê‰∫§Â∑•Âçï ",-1)])]),_:1},8,["loading"]),o(U,{onClick:c[3]||(c[3]=q=>f.$router.push("/orders")),size:"large"},{default:a(()=>[...c[8]||(c[8]=[S("ËøîÂõûÂàóË°®",-1)])]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1})])}}},Vo=Ve(Oo,[["__scopeId","data-v-18a3a272"]]),To={style:{float:"left"}},Uo={style:{float:"right",color:"#8492a6","font-size":"13px"}},$o={class:"dialog-footer"},Do={__name:"AssignDialog",props:{orderId:{type:Number,required:!0}},emits:["assigned"],setup(e,{expose:t,emit:s}){const n=e,r=s,d=V(!1),v=V(!1),g=V(!1),u=V([]),h=V(null),_=Ee({maintainerId:"",note:""}),m=Ee({maintainerId:[{required:!0,message:"ËØ∑ÈÄâÊã©Áª¥‰øÆÂ∑•",trigger:"change"}]}),f=async()=>{d.value=!0,await c()},c=async()=>{g.value=!0;try{const D=await it();u.value=D.data,u.value.length===0&&P.warning("ÊöÇÊó†ÂèØÁî®ÁöÑÁª¥‰øÆÂ∑•")}catch(D){P.error("Ëé∑ÂèñÁª¥‰øÆÂ∑•ÂàóË°®Â§±Ë¥•Ôºö"+(D.response?.data||D.message))}finally{g.value=!1}},R=()=>{_.maintainerId="",_.note="",h.value?.resetFields()},O=async()=>{h.value&&await h.value.validate(async D=>{if(D){v.value=!0;try{await en(n.orderId,_.maintainerId),P.success("ÊåáÊ¥æÊàêÂäüÔºÅ"),d.value=!1,r("assigned"),R()}catch(U){P.error("ÊåáÊ¥æÂ§±Ë¥•Ôºö"+(U.response?.data||U.message))}finally{v.value=!1}}})};return t({open:f}),(D,U)=>{const b=A("el-option"),k=A("el-select"),j=A("el-form-item"),q=A("el-input"),x=A("el-form"),w=A("el-button"),W=A("el-dialog");return $(),Z(W,{modelValue:d.value,"onUpdate:modelValue":U[3]||(U[3]=Q=>d.value=Q),title:"üë§ ÊåáÊ¥æÁª¥‰øÆÂ∑•",width:"500px",onClose:R,"close-on-click-modal":!1,class:"assign-dialog"},{footer:a(()=>[C("div",$o,[o(w,{onClick:U[2]||(U[2]=Q=>d.value=!1),size:"large"},{default:a(()=>[...U[4]||(U[4]=[S("ÂèñÊ∂à",-1)])]),_:1}),o(w,{type:"primary",onClick:O,loading:v.value,size:"large"},{default:a(()=>[...U[5]||(U[5]=[S(" Á°ÆËÆ§ÊåáÊ¥æ ",-1)])]),_:1},8,["loading"])])]),default:a(()=>[o(x,{model:_,rules:m,ref_key:"formRef",ref:h,"label-width":"80px"},{default:a(()=>[o(j,{label:"Áª¥‰øÆÂ∑•",prop:"maintainerId"},{default:a(()=>[o(k,{modelValue:_.maintainerId,"onUpdate:modelValue":U[0]||(U[0]=Q=>_.maintainerId=Q),placeholder:"ËØ∑ÈÄâÊã©Áª¥‰øÆÂ∑•",size:"large",filterable:"",loading:g.value},{default:a(()=>[($(!0),ne(ct,null,dt(u.value,Q=>($(),Z(b,{key:Q.id,label:Q.username,value:Q.id},{default:a(()=>[C("span",To,F(Q.username),1),C("span",Uo,"ID: "+F(Q.id),1)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue","loading"])]),_:1}),o(j,{label:"Â§áÊ≥®"},{default:a(()=>[o(q,{modelValue:_.note,"onUpdate:modelValue":U[1]||(U[1]=Q=>_.note=Q),type:"textarea",rows:3,placeholder:"ÂèØÊ∑ªÂä†ÊåáÊ¥æÂ§áÊ≥®‰ø°ÊÅØÔºàÂèØÈÄâÔºâ",maxlength:"200","show-word-limit":""},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue"])}}},zo=Ve(Do,[["__scopeId","data-v-c9b01a37"]]),Bo={class:"detail-container"},Mo={class:"card-header"},Lo={key:0,class:"order-info"},Go={class:"description-section"},Ho={key:0,class:"image-section"},qo={class:"action-section"},Fo={__name:"OrderDetail",setup(e){const t=Yt(),s=Qe(),n=V(null),r=V(!1),d=V(!1),v=V(null),g=ve(()=>parseInt(t.params.id)),u="http://csp-manege.top:5002",h=ve(()=>{if(!n.value)return!1;const b=JSON.parse(sessionStorage.getItem("user")||"{}"),k=b.username;return b.role==="Admin"?!0:b.role==="Maintainer"?n.value.assignedToName===k:!1}),_=b=>JSON.parse(sessionStorage.getItem("permissions")||"[]").includes(b),m=b=>({Pending:"warning",Processing:"primary",Completed:"success"})[b]||"info",f=b=>({Pending:"ÂæÖÂ§ÑÁêÜ",Processing:"Â§ÑÁêÜ‰∏≠",Completed:"Â∑≤ÂÆåÊàê"})[b]||b,c=b=>new Date(b).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),R=async()=>{r.value=!0;try{const b=await Fs(g.value);n.value=b.data}catch(b){P.error("Âä†ËΩΩÂ∑•ÂçïÂ§±Ë¥•Ôºö"+(b.response?.data||b.message)),setTimeout(()=>s.back(),1500)}finally{r.value=!1}},O=async b=>{const k=f(b);try{await Ae.confirm(`Á°ÆÂÆöË¶ÅÂ∞ÜÂ∑•ÂçïÁä∂ÊÄÅÊõ¥Êñ∞‰∏∫"${k}"ÂêóÔºü`,"Á°ÆËÆ§Êìç‰Ωú",{confirmButtonText:"Á°ÆÂÆö",cancelButtonText:"ÂèñÊ∂à",type:"warning"}),d.value=!0,await Zt(n.value.id,b),P.success("Áä∂ÊÄÅÊõ¥Êñ∞ÊàêÂäüÔºÅ"),R()}catch(j){j!=="cancel"&&P.error("Êõ¥Êñ∞Â§±Ë¥•Ôºö"+(j.response?.data||j.message))}finally{d.value=!1}},D=()=>{v.value.open()},U=()=>{R()};return He(R),(b,k)=>{const j=A("el-button"),q=A("el-descriptions-item"),x=A("el-tag"),w=A("el-descriptions"),W=A("el-image"),Q=A("el-tooltip"),fe=A("el-empty"),me=A("el-card"),we=je("loading");return $(),ne("div",Bo,[o(me,{class:"detail-card",shadow:"hover"},{header:a(()=>[C("div",Mo,[k[4]||(k[4]=C("h2",null,"üìã Â∑•ÂçïËØ¶ÊÉÖ",-1)),o(j,{type:"primary",icon:B(Cn),onClick:k[0]||(k[0]=ae=>b.$router.back())},{default:a(()=>[...k[3]||(k[3]=[S("ËøîÂõû",-1)])]),_:1},8,["icon"])])]),default:a(()=>[n.value?Le(($(),ne("div",Lo,[o(w,{column:2,border:"",class:"info-descriptions"},{default:a(()=>[o(q,{label:"Â∑•ÂçïÂè∑"},{default:a(()=>[S(F(n.value.id),1)]),_:1}),o(q,{label:"Áä∂ÊÄÅ"},{default:a(()=>[o(x,{type:m(n.value.status),size:"large"},{default:a(()=>[S(F(f(n.value.status)),1)]),_:1},8,["type"])]),_:1}),o(q,{label:"Êä•‰øÆÊ†áÈ¢ò"},{default:a(()=>[S(F(n.value.title),1)]),_:1}),o(q,{label:"Êä•‰øÆ‰∫∫"},{default:a(()=>[S(F(n.value.creator),1)]),_:1}),o(q,{label:"Áª¥‰øÆÂ∑•"},{default:a(()=>[C("span",{class:ft(n.value.assignedToName?"assigned-worker":"unassigned-worker")},F(n.value.assignedToName||"Êú™ÂàÜÈÖç"),3)]),_:1}),o(q,{label:"ÂÆøËàç‰ΩçÁΩÆ"},{default:a(()=>[S(F(n.value.location),1)]),_:1}),o(q,{label:"Êä•‰øÆÊó∂Èó¥"},{default:a(()=>[S(F(c(n.value.createTime)),1)]),_:1})]),_:1}),C("div",Go,[k[5]||(k[5]=C("h3",null,"üí¨ ÈóÆÈ¢òÊèèËø∞",-1)),C("p",null,F(n.value.description),1)]),n.value.imageUrl?($(),ne("div",Ho,[k[6]||(k[6]=C("h3",null,"üì∑ ÂõæÁâáÈôÑ‰ª∂",-1)),o(W,{src:`${B(u)}${n.value.imageUrl}`,"preview-src-list":[`${B(u)}${n.value.imageUrl}`],fit:"cover",class:"order-image"},null,8,["src","preview-src-list"])])):oe("",!0),C("div",qo,[_("ProcessOrder")&&n.value.status==="Pending"?($(),Z(j,{key:0,type:"primary",size:"large",onClick:k[1]||(k[1]=ae=>O("Processing")),loading:d.value},{default:a(()=>[...k[7]||(k[7]=[S(" üîß ÂºÄÂßãÂ§ÑÁêÜ ",-1)])]),_:1},8,["loading"])):oe("",!0),_("CompleteOrder")&&n.value.status==="Processing"?($(),Z(j,{key:1,type:"success",size:"large",onClick:k[2]||(k[2]=ae=>O("Completed")),loading:d.value,disabled:!h.value},{default:a(()=>[...k[8]||(k[8]=[S(" ‚úÖ Ê†áËÆ∞ÂÆåÊàê ",-1)])]),_:1},8,["loading","disabled"])):oe("",!0),_("CompleteOrder")&&n.value.status==="Processing"&&!h.value?($(),Z(Q,{key:2,content:"ËØ•Â∑•ÂçïÁî±ÂÖ∂‰ªñÁª¥‰øÆÂ∑•Ë¥üË¥£ÔºåÊÇ®Êó†ÊùÉÊ†áËÆ∞ÂÆåÊàê",placement:"top"},{default:a(()=>[...k[9]||(k[9]=[C("span",{style:{"margin-left":"10px",color:"#909399","font-size":"14px"}}," üìå ÈùûÊú¨‰∫∫Â∑•Âçï ",-1)])]),_:1})):oe("",!0),_("AssignOrder")&&n.value.status==="Pending"?($(),Z(j,{key:3,type:"warning",size:"large",onClick:D},{default:a(()=>[...k[10]||(k[10]=[S(" üë§ ÊåáÊ¥æÁª¥‰øÆÂ∑• ",-1)])]),_:1})):oe("",!0)])])),[[we,r.value]]):($(),Z(fe,{key:1,description:"Â∑•Âçï‰∏çÂ≠òÂú®"}))]),_:1}),o(zo,{ref_key:"assignDialogRef",ref:v,orderId:g.value,onAssigned:U},null,8,["orderId"])])}}},jo=Ve(Fo,[["__scopeId","data-v-798ccf5b"]]),Ko={class:"notification-center"},Wo={class:"card-header"},Jo={class:"header-actions"},Qo={class:"user-dropdown"},Yo={class:"username"},Xo={class:"user-info"},Zo={class:"info-value"},ea={class:"user-info"},ta={class:"info-value"},na={class:"filter-bar"},sa={class:"notification-list"},oa=["onClick"],aa={class:"notification-icon"},ra={key:0,class:"unread-dot"},la={class:"notification-content"},ia={class:"notification-title"},ua={class:"notification-message"},ca={class:"notification-time"},da={class:"notification-actions"},fa={key:0,class:"pagination"},pa={__name:"NotificationCenter",setup(e){const t=Qe(),s=V(!1),n=V([]),r=V(0),d=V(1),v=V(10),g=V("all"),u=V(0),h=JSON.parse(sessionStorage.getItem("user")||"{}"),_=()=>h.username?h.username.charAt(0).toUpperCase():"U",m=x=>({Admin:"üëë ÁÆ°ÁêÜÂëò",Maintainer:"üîß Áª¥‰øÆÂ∑•",Student:"üéì Â≠¶Áîü"})[x]||x,f=x=>{x==="logout"?c():x==="settings"&&P.info("üõ†Ô∏è ËÆæÁΩÆÂäüËÉΩÂºÄÂèë‰∏≠...")},c=async()=>{try{await Ae.confirm("Á°ÆÂÆöË¶ÅÈÄÄÂá∫ÁôªÂΩïÂêóÔºü","ÊèêÁ§∫",{confirmButtonText:"Á°ÆÂÆö",cancelButtonText:"ÂèñÊ∂à",type:"warning"}),Xt()}catch{}},R=async()=>{s.value=!0;try{const x={page:d.value,pageSize:v.value};g.value==="unread"?x.isRead=!1:g.value==="read"&&(x.isRead=!0);const w=await Qs(x);n.value=w.data.items,r.value=w.data.total}catch(x){P.error("Âä†ËΩΩÊ∂àÊÅØÂ§±Ë¥•Ôºö"+(x.response?.data?.message||x.message))}finally{s.value=!1}},O=async()=>{try{const x=await tn();u.value=x.data.count}catch(x){console.error("Âä†ËΩΩÊú™ËØªÊï∞ÈáèÂ§±Ë¥•",x)}},D=()=>{d.value=1,R()},U=async x=>{try{await Ys(x),P.success("Â∑≤Ê†áËÆ∞‰∏∫Â∑≤ËØª"),R(),O()}catch(w){P.error("Êìç‰ΩúÂ§±Ë¥•Ôºö"+(w.response?.data?.message||w.message))}},b=async()=>{try{await Ae.confirm("Á°ÆÂÆöË¶ÅÂ∞ÜÊâÄÊúâÊ∂àÊÅØÊ†á‰∏∫Â∑≤ËØªÂêóÔºü","ÊèêÁ§∫",{confirmButtonText:"Á°ÆÂÆö",cancelButtonText:"ÂèñÊ∂à",type:"warning"}),await Xs(),P.success("Â∑≤ÂÖ®ÈÉ®Ê†á‰∏∫Â∑≤ËØª"),R(),O()}catch(x){x!=="cancel"&&P.error("Êìç‰ΩúÂ§±Ë¥•Ôºö"+(x.response?.data?.message||x.message))}},k=async x=>{try{await Ae.confirm("Á°ÆÂÆöË¶ÅÂà†Èô§ËøôÊù°Ê∂àÊÅØÂêóÔºü","ÊèêÁ§∫",{confirmButtonText:"Á°ÆÂÆö",cancelButtonText:"ÂèñÊ∂à",type:"warning"}),await Zs(x),P.success("Ê∂àÊÅØÂ∑≤Âà†Èô§"),R(),O()}catch(w){w!=="cancel"&&P.error("Êìç‰ΩúÂ§±Ë¥•Ôºö"+(w.response?.data?.message||w.message))}},j=async x=>{x.isRead||await U(x.id),x.relatedOrderId&&t.push(`/orders/${x.relatedOrderId}`)},q=x=>{if(!x)return"-";const w=new Date(x),W=new Date,Q=W-w;if(Q<6e4)return"ÂàöÂàö";if(Q<36e5)return`${Math.floor(Q/6e4)}ÂàÜÈíüÂâç`;if(w.toDateString()===W.toDateString())return`‰ªäÂ§© ${w.getHours()}:${String(w.getMinutes()).padStart(2,"0")}`;const fe=new Date(W);return fe.setDate(fe.getDate()-1),w.toDateString()===fe.toDateString()?`Êò®Â§© ${w.getHours()}:${String(w.getMinutes()).padStart(2,"0")}`:`${w.getMonth()+1}-${w.getDate()} ${w.getHours()}:${String(w.getMinutes()).padStart(2,"0")}`};return He(()=>{R(),O()}),(x,w)=>{const W=A("el-button"),Q=A("el-avatar"),fe=A("el-icon"),me=A("el-dropdown-item"),we=A("el-dropdown-menu"),ae=A("el-dropdown"),be=A("el-radio-button"),Ce=A("el-badge"),z=A("el-radio-group"),p=A("el-empty"),Y=A("el-pagination"),K=A("el-card"),le=je("loading");return $(),ne("div",Ko,[o(K,{class:"notification-card",shadow:"hover"},{header:a(()=>[C("div",Wo,[w[11]||(w[11]=C("h2",null,"üì¨ Ê∂àÊÅØ‰∏≠ÂøÉ",-1)),C("div",Jo,[u.value>0?($(),Z(W,{key:0,type:"primary",size:"small",onClick:b},{default:a(()=>[...w[4]||(w[4]=[S(" ÂÖ®ÈÉ®Ê†á‰∏∫Â∑≤ËØª ",-1)])]),_:1})):oe("",!0),o(W,{type:"default",size:"small",onClick:w[0]||(w[0]=T=>x.$router.back())},{default:a(()=>[...w[5]||(w[5]=[S(" ËøîÂõû ",-1)])]),_:1}),o(ae,{onCommand:f,trigger:"click"},{dropdown:a(()=>[o(we,null,{default:a(()=>[o(me,{disabled:""},{default:a(()=>[C("div",Xo,[w[6]||(w[6]=C("div",{class:"info-label"},"üë§ Áî®Êà∑Âêç",-1)),C("div",Zo,F(B(h).username),1)])]),_:1}),o(me,{disabled:""},{default:a(()=>[C("div",ea,[w[7]||(w[7]=C("div",{class:"info-label"},"üé≠ ËßíËâ≤",-1)),C("div",ta,F(m(B(h).role)),1)])]),_:1}),o(me,{disabled:""},{default:a(()=>[...w[8]||(w[8]=[C("div",{class:"user-info"},[C("div",{class:"info-label"},"üìû ÊâãÊú∫Âè∑"),C("div",{class:"info-value"},"138****8888")],-1)])]),_:1}),o(me,{divided:"",command:"settings"},{default:a(()=>[o(fe,null,{default:a(()=>[o(B(Dt))]),_:1}),w[9]||(w[9]=S(" ËÆæÁΩÆ ",-1))]),_:1}),o(me,{command:"logout"},{default:a(()=>[o(fe,null,{default:a(()=>[o(B(zt))]),_:1}),w[10]||(w[10]=S(" ÈÄÄÂá∫ÁôªÂΩï ",-1))]),_:1})]),_:1})]),default:a(()=>[C("div",Qo,[o(Q,{size:40,class:"user-avatar"},{default:a(()=>[S(F(_()),1)]),_:1}),C("span",Yo,F(B(h).username),1),o(fe,{class:"el-icon--right"},{default:a(()=>[o(B(Fe))]),_:1})])]),_:1})])])]),default:a(()=>[C("div",na,[o(z,{modelValue:g.value,"onUpdate:modelValue":w[1]||(w[1]=T=>g.value=T),onChange:D},{default:a(()=>[o(be,{label:"all"},{default:a(()=>[...w[12]||(w[12]=[S("ÂÖ®ÈÉ®",-1)])]),_:1}),o(be,{label:"unread"},{default:a(()=>[w[13]||(w[13]=S(" Êú™ËØª ",-1)),u.value>0?($(),Z(Ce,{key:0,value:u.value,class:"badge"},null,8,["value"])):oe("",!0)]),_:1}),o(be,{label:"read"},{default:a(()=>[...w[14]||(w[14]=[S("Â∑≤ËØª",-1)])]),_:1})]),_:1},8,["modelValue"])]),Le(($(),ne("div",sa,[n.value.length===0?($(),Z(p,{key:0,description:"ÊöÇÊó†Ê∂àÊÅØ"})):oe("",!0),($(!0),ne(ct,null,dt(n.value,T=>($(),ne("div",{key:T.id,class:ft(["notification-item",{unread:!T.isRead}]),onClick:ue=>j(T)},[C("div",aa,[T.isRead?oe("",!0):($(),ne("span",ra,"‚óè")),w[15]||(w[15]=S(" üì¢ ",-1))]),C("div",la,[C("div",ia,F(T.title),1),C("div",ua,F(T.message),1),C("div",ca,F(q(T.createTime)),1)]),C("div",da,[T.isRead?oe("",!0):($(),Z(W,{key:0,type:"primary",size:"small",text:"",onClick:ht(ue=>U(T.id),["stop"])},{default:a(()=>[...w[16]||(w[16]=[S(" Ê†á‰∏∫Â∑≤ËØª ",-1)])]),_:1},8,["onClick"])),o(W,{type:"danger",size:"small",text:"",onClick:ht(ue=>k(T.id),["stop"])},{default:a(()=>[...w[17]||(w[17]=[S(" ‚úï ",-1)])]),_:1},8,["onClick"])])],10,oa))),128))])),[[le,s.value]]),r.value>0?($(),ne("div",fa,[o(Y,{"current-page":d.value,"onUpdate:currentPage":w[2]||(w[2]=T=>d.value=T),"page-size":v.value,"onUpdate:pageSize":w[3]||(w[3]=T=>v.value=T),"page-sizes":[10,20,50],layout:"total, sizes, prev, pager, next",total:r.value,onSizeChange:R,onCurrentChange:R},null,8,["current-page","page-size","total"])])):oe("",!0)]),_:1})])}}},ma=Ve(pa,[["__scopeId","data-v-3193e92c"]]),Se=Ke.create({baseURL:"http://csp-manege.top:5002/api",timeout:5e3});Se.interceptors.request.use(e=>{const t=sessionStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e});Se.interceptors.response.use(e=>e,e=>(e.response?.status===401&&(console.warn("üîê Token Â∑≤Â§±ÊïàÔºåÊ∏ÖÈô§ÁôªÂΩï‰ø°ÊÅØ"),sessionStorage.removeItem("token"),sessionStorage.removeItem("user"),P.warning("üîí ÁôªÂΩïÂ∑≤ËøáÊúüÔºåËØ∑ÈáçÊñ∞ÁôªÂΩï"),Re.push("/login")),Promise.reject(e)));const ga=()=>Se.get("/users/profile"),va=e=>Se.put("/users/change-password",e),ha=e=>Se.put("/users/profile",e),_a=e=>Se.get("/users",{params:e}),ya=e=>Se.post("/users",e),wa=(e,t=null)=>{const s=t?{password:t}:{};return Se.post(`/users/${e}/reset-password`,s)},ba=(e,t)=>Se.put(`/users/${e}/role`,{role:t}),Ca=e=>Se.put(`/users/${e}/toggle-status`),Sa={class:"settings-container"},Ra={class:"tab-content"},ka={class:"tab-content"},Aa={class:"tab-content"},Ea={class:"search-bar"},Ia={class:"pagination"},Pa={__name:"Settings",setup(e){const t=Qe(),s=JSON.parse(sessionStorage.getItem("user")||"{}"),n=s.username||"",r=ve(()=>s.role==="Admin"),d=V("profile"),v=V({username:"",role:"",phoneNumber:""}),g=V({oldPassword:"",newPassword:"",confirmPassword:""}),u=V(!1),h=V([]),_=V(0),m=V(1),f=V(10),c=V(""),R=V(""),O=V(null),D=V(!1),U=V(!1),b=V({username:"",password:"",role:"Student",phoneNumber:""}),k=V(!1),j=V(!1),q=V({userId:null,username:"",newPassword:""}),x=V(!1),w=V(!1),W=V({userId:null,username:"",currentRole:"",newRole:""}),Q=async()=>{try{const l=(await ga()).data.data;v.value={username:l.username,role:l.role,phoneNumber:l.phoneNumber||""}}catch(i){P.error("Âä†ËΩΩ‰∏™‰∫∫ËµÑÊñôÂ§±Ë¥•Ôºö"+(i.response?.data?.message||i.message))}},fe=async()=>{try{await ha({phoneNumber:v.value.phoneNumber}),P.success("‰∏™‰∫∫ËµÑÊñôÊõ¥Êñ∞ÊàêÂäü")}catch(i){P.error("Êõ¥Êñ∞Â§±Ë¥•Ôºö"+(i.response?.data?.message||i.message))}},me=async()=>{if(!g.value.oldPassword){P.warning("ËØ∑ËæìÂÖ•ÂéüÂØÜÁ†Å");return}if(!g.value.newPassword){P.warning("ËØ∑ËæìÂÖ•Êñ∞ÂØÜÁ†Å");return}if(g.value.newPassword.length<6){P.warning("Êñ∞ÂØÜÁ†ÅËá≥Â∞ë6‰Ωç");return}if(g.value.newPassword!==g.value.confirmPassword){P.warning("‰∏§Ê¨°ËæìÂÖ•ÁöÑÂØÜÁ†Å‰∏ç‰∏ÄËá¥");return}try{await va({oldPassword:g.value.oldPassword,newPassword:g.value.newPassword}),P.success("ÂØÜÁ†Å‰øÆÊîπÊàêÂäüÔºåËØ∑ÈáçÊñ∞ÁôªÂΩï"),sessionStorage.clear(),setTimeout(()=>{t.push("/login")},1500)}catch(i){P.error("‰øÆÊîπÂ§±Ë¥•Ôºö"+(i.response?.data?.message||i.message))}},we=()=>{g.value={oldPassword:"",newPassword:"",confirmPassword:""}},ae=async()=>{u.value=!0;try{const i={page:m.value,pageSize:f.value,role:R.value,keyword:c.value,isActive:O.value},l=await _a(i);h.value=l.data.data.items,_.value=l.data.data.total}catch(i){P.error("Âä†ËΩΩÁî®Êà∑ÂàóË°®Â§±Ë¥•Ôºö"+(i.response?.data?.message||i.message))}finally{u.value=!1}},be=()=>{m.value=1,ae()},Ce=()=>{c.value="",R.value="",O.value=null,be()},z=i=>{f.value=i,ae()},p=i=>{m.value=i,ae()},Y=i=>{q.value={userId:i.id,username:i.username,newPassword:""},k.value=!0},K=async()=>{const i=q.value.newPassword.trim();if(i&&i.length<6){P.warning("ÂØÜÁ†ÅËá≥Â∞ë6‰ΩçÔºÅ");return}j.value=!0;try{const l=i||"a123456",y=await wa(q.value.userId,l);P.success(y.data.message||`ÂØÜÁ†ÅÂ∑≤ÈáçÁΩÆ‰∏∫Ôºö${l}`),k.value=!1}catch(l){P.error("ÈáçÁΩÆÂ§±Ë¥•Ôºö"+(l.response?.data?.message||l.message))}finally{j.value=!1}},le=i=>{W.value={userId:i.id,username:i.username,currentRole:i.role,newRole:i.role},x.value=!0},T=async()=>{if(!W.value.newRole){P.warning("ËØ∑ÈÄâÊã©Êñ∞ËßíËâ≤");return}w.value=!0;try{await ba(W.value.userId,W.value.newRole),P.success("ËßíËâ≤‰øÆÊîπÊàêÂäü"),x.value=!1,ae()}catch(i){P.error("‰øÆÊîπÂ§±Ë¥•Ôºö"+(i.response?.data?.message||i.message))}finally{w.value=!1}},ue=async i=>{const l=i.isActive?"Á¶ÅÁî®":"ÂêØÁî®";try{await Ae.confirm(`Á°ÆÂÆöË¶Å${l}Áî®Êà∑ ${i.username} ÂêóÔºü`,`${l}Ë¥¶Âè∑`,{confirmButtonText:"Á°ÆÂÆö",cancelButtonText:"ÂèñÊ∂à",type:"warning"});const y=await Ca(i.id);P.success(y.data.message),ae()}catch(y){y!=="cancel"&&P.error(`${l}Â§±Ë¥•Ôºö`+(y.response?.data?.message||y.message))}},X=async()=>{if(!b.value.username){P.warning("ËØ∑ËæìÂÖ•Áî®Êà∑Âêç");return}if(!b.value.password){P.warning("ËØ∑ËæìÂÖ•ÂØÜÁ†Å");return}if(b.value.password.length<6){P.warning("ÂØÜÁ†ÅËá≥Â∞ë6‰Ωç");return}if(!b.value.role){P.warning("ËØ∑ÈÄâÊã©ËßíËâ≤");return}U.value=!0;try{await ya({username:b.value.username,password:b.value.password,role:b.value.role,phoneNumber:b.value.phoneNumber||null}),P.success("Áî®Êà∑ÂàõÂª∫ÊàêÂäü"),D.value=!1,b.value={username:"",password:"",role:"Student",phoneNumber:""},ae()}catch(i){P.error("ÂàõÂª∫Â§±Ë¥•Ôºö"+(i.response?.data?.message||i.message))}finally{U.value=!1}},se=i=>({Admin:"danger",Maintainer:"warning",Student:"primary"})[i]||"info",ge=i=>({Admin:"üëë ÁÆ°ÁêÜÂëò",Maintainer:"üîß Áª¥‰øÆÂ∑•",Student:"üéì Â≠¶Áîü"})[i]||i,_e=i=>{if(!i)return"-";const l=new Date(i),y=l.getFullYear(),E=String(l.getMonth()+1).padStart(2,"0"),G=String(l.getDate()).padStart(2,"0"),H=String(l.getHours()).padStart(2,"0"),L=String(l.getMinutes()).padStart(2,"0");return`${y}-${E}-${G} ${H}:${L}`};return He(()=>{Q(),r.value&&ae()}),(i,l)=>{const y=A("el-input"),E=A("el-form-item"),G=A("el-tag"),H=A("el-button"),L=A("el-form"),M=A("el-tab-pane"),N=A("el-option"),ce=A("el-select"),ee=A("el-table-column"),nn=A("el-table"),sn=A("el-pagination"),on=A("el-tabs"),an=A("el-card"),Xe=A("el-dialog"),rn=A("el-alert"),ln=je("loading");return $(),ne("div",Sa,[o(an,{class:"settings-card"},{header:a(()=>[...l[26]||(l[26]=[C("div",{class:"card-header"},[C("h2",null,"‚öôÔ∏è ËÆæÁΩÆ")],-1)])]),default:a(()=>[o(on,{modelValue:d.value,"onUpdate:modelValue":l[11]||(l[11]=I=>d.value=I),type:"border-card"},{default:a(()=>[o(M,{label:"üë§ ‰∏™‰∫∫ËÆæÁΩÆ",name:"profile"},{default:a(()=>[C("div",Ra,[o(L,{model:v.value,"label-width":"120px",style:{"max-width":"600px"}},{default:a(()=>[o(E,{label:"Áî®Êà∑Âêç"},{default:a(()=>[o(y,{modelValue:v.value.username,"onUpdate:modelValue":l[0]||(l[0]=I=>v.value.username=I),disabled:""},null,8,["modelValue"])]),_:1}),o(E,{label:"ËßíËâ≤"},{default:a(()=>[o(G,{type:se(v.value.role),size:"large"},{default:a(()=>[S(F(ge(v.value.role)),1)]),_:1},8,["type"])]),_:1}),o(E,{label:"ÊâãÊú∫Âè∑"},{default:a(()=>[o(y,{modelValue:v.value.phoneNumber,"onUpdate:modelValue":l[1]||(l[1]=I=>v.value.phoneNumber=I),placeholder:"ËØ∑ËæìÂÖ•ÊâãÊú∫Âè∑",maxlength:"11"},null,8,["modelValue"])]),_:1}),o(E,null,{default:a(()=>[o(H,{type:"primary",onClick:fe},{default:a(()=>[...l[27]||(l[27]=[S("‰øùÂ≠ò‰øÆÊîπ",-1)])]),_:1})]),_:1})]),_:1},8,["model"])])]),_:1}),o(M,{label:"üîí ‰øÆÊîπÂØÜÁ†Å",name:"password"},{default:a(()=>[C("div",ka,[o(L,{model:g.value,"label-width":"120px",style:{"max-width":"600px"}},{default:a(()=>[o(E,{label:"ÂéüÂØÜÁ†Å"},{default:a(()=>[o(y,{modelValue:g.value.oldPassword,"onUpdate:modelValue":l[2]||(l[2]=I=>g.value.oldPassword=I),type:"password",placeholder:"ËØ∑ËæìÂÖ•ÂéüÂØÜÁ†Å","show-password":""},null,8,["modelValue"])]),_:1}),o(E,{label:"Êñ∞ÂØÜÁ†Å"},{default:a(()=>[o(y,{modelValue:g.value.newPassword,"onUpdate:modelValue":l[3]||(l[3]=I=>g.value.newPassword=I),type:"password",placeholder:"ËØ∑ËæìÂÖ•Êñ∞ÂØÜÁ†ÅÔºàËá≥Â∞ë6‰ΩçÔºâ","show-password":""},null,8,["modelValue"])]),_:1}),o(E,{label:"Á°ÆËÆ§ÂØÜÁ†Å"},{default:a(()=>[o(y,{modelValue:g.value.confirmPassword,"onUpdate:modelValue":l[4]||(l[4]=I=>g.value.confirmPassword=I),type:"password",placeholder:"ËØ∑ÂÜçÊ¨°ËæìÂÖ•Êñ∞ÂØÜÁ†Å","show-password":""},null,8,["modelValue"])]),_:1}),o(E,null,{default:a(()=>[o(H,{type:"primary",onClick:me},{default:a(()=>[...l[28]||(l[28]=[S("‰øÆÊîπÂØÜÁ†Å",-1)])]),_:1}),o(H,{onClick:we},{default:a(()=>[...l[29]||(l[29]=[S("ÈáçÁΩÆ",-1)])]),_:1})]),_:1})]),_:1},8,["model"])])]),_:1}),r.value?($(),Z(M,{key:0,label:"üë• Ë¥¶Âè∑ÁÆ°ÁêÜ",name:"users"},{default:a(()=>[C("div",Aa,[C("div",Ea,[o(H,{type:"success",onClick:l[5]||(l[5]=I=>D.value=!0),style:{"margin-right":"10px"}},{default:a(()=>[...l[30]||(l[30]=[S(" ‚ûï ÂàõÂª∫Áî®Êà∑ ",-1)])]),_:1}),o(y,{modelValue:c.value,"onUpdate:modelValue":l[6]||(l[6]=I=>c.value=I),placeholder:"ÊêúÁ¥¢Áî®Êà∑ÂêçÊàñÊâãÊú∫Âè∑",style:{width:"300px","margin-right":"10px"},clearable:""},null,8,["modelValue"]),o(ce,{modelValue:R.value,"onUpdate:modelValue":l[7]||(l[7]=I=>R.value=I),placeholder:"ËßíËâ≤Á≠õÈÄâ",style:{width:"150px","margin-right":"10px"},clearable:""},{default:a(()=>[o(N,{label:"ÂÖ®ÈÉ®ËßíËâ≤",value:""}),o(N,{label:"üëë ÁÆ°ÁêÜÂëò",value:"Admin"}),o(N,{label:"üîß Áª¥‰øÆÂ∑•",value:"Maintainer"}),o(N,{label:"üéì Â≠¶Áîü",value:"Student"})]),_:1},8,["modelValue"]),o(ce,{modelValue:O.value,"onUpdate:modelValue":l[8]||(l[8]=I=>O.value=I),placeholder:"Áä∂ÊÄÅÁ≠õÈÄâ",style:{width:"150px","margin-right":"10px"},clearable:""},{default:a(()=>[o(N,{label:"ÂÖ®ÈÉ®Áä∂ÊÄÅ",value:null}),o(N,{label:"‚úÖ Â∑≤ÂêØÁî®",value:!0}),o(N,{label:"üö´ Â∑≤Á¶ÅÁî®",value:!1})]),_:1},8,["modelValue"]),o(H,{type:"primary",onClick:be},{default:a(()=>[...l[31]||(l[31]=[S("üîç ÊêúÁ¥¢",-1)])]),_:1}),o(H,{onClick:Ce},{default:a(()=>[...l[32]||(l[32]=[S("üîÑ ÈáçÁΩÆ",-1)])]),_:1})]),Le(($(),Z(nn,{data:h.value,stripe:"",style:{width:"100%","margin-top":"20px"}},{default:a(()=>[o(ee,{prop:"id",label:"ID",width:"80"}),o(ee,{prop:"username",label:"Áî®Êà∑Âêç",width:"150"}),o(ee,{prop:"role",label:"ËßíËâ≤",width:"120"},{default:a(({row:I})=>[o(G,{type:se(I.role)},{default:a(()=>[S(F(ge(I.role)),1)]),_:2},1032,["type"])]),_:1}),o(ee,{prop:"phoneNumber",label:"ÊâãÊú∫Âè∑",width:"150"},{default:a(({row:I})=>[S(F(I.phoneNumber||"-"),1)]),_:1}),o(ee,{prop:"isActive",label:"Áä∂ÊÄÅ",width:"100"},{default:a(({row:I})=>[o(G,{type:I.isActive?"success":"danger"},{default:a(()=>[S(F(I.isActive?"‚úÖ ÂêØÁî®":"üö´ Á¶ÅÁî®"),1)]),_:2},1032,["type"])]),_:1}),o(ee,{prop:"createTime",label:"ÂàõÂª∫Êó∂Èó¥",width:"180"},{default:a(({row:I})=>[S(F(_e(I.createTime)),1)]),_:1}),o(ee,{label:"Êìç‰Ωú",fixed:"right",width:"300"},{default:a(({row:I})=>[o(H,{type:"primary",size:"small",onClick:vt=>Y(I),disabled:I.role==="Admin"&&I.username!==B(n)},{default:a(()=>[...l[33]||(l[33]=[S(" üîë ÈáçÁΩÆÂØÜÁ†Å ",-1)])]),_:1},8,["onClick","disabled"]),o(H,{type:"warning",size:"small",onClick:vt=>le(I),disabled:I.role==="Admin"&&I.username!==B(n)},{default:a(()=>[...l[34]||(l[34]=[S(" üîÑ ÊîπËßíËâ≤ ",-1)])]),_:1},8,["onClick","disabled"]),o(H,{type:I.isActive?"danger":"success",size:"small",onClick:vt=>ue(I),disabled:I.role==="Admin"&&I.username!==B(n)},{default:a(()=>[S(F(I.isActive?"üö´ Á¶ÅÁî®":"‚úÖ ÂêØÁî®"),1)]),_:2},1032,["type","onClick","disabled"])]),_:1})]),_:1},8,["data"])),[[ln,u.value]]),C("div",Ia,[o(sn,{"current-page":m.value,"onUpdate:currentPage":l[9]||(l[9]=I=>m.value=I),"page-size":f.value,"onUpdate:pageSize":l[10]||(l[10]=I=>f.value=I),"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",total:_.value,onSizeChange:z,onCurrentChange:p},null,8,["current-page","page-size","total"])])])]),_:1})):oe("",!0)]),_:1},8,["modelValue"])]),_:1}),o(Xe,{modelValue:D.value,"onUpdate:modelValue":l[17]||(l[17]=I=>D.value=I),title:"ÂàõÂª∫Êñ∞Áî®Êà∑",width:"500px","close-on-click-modal":!1},{footer:a(()=>[o(H,{onClick:l[16]||(l[16]=I=>D.value=!1)},{default:a(()=>[...l[35]||(l[35]=[S("ÂèñÊ∂à",-1)])]),_:1}),o(H,{type:"primary",onClick:X,loading:U.value},{default:a(()=>[...l[36]||(l[36]=[S("ÂàõÂª∫",-1)])]),_:1},8,["loading"])]),default:a(()=>[o(L,{model:b.value,"label-width":"100px"},{default:a(()=>[o(E,{label:"Áî®Êà∑Âêç",required:""},{default:a(()=>[o(y,{modelValue:b.value.username,"onUpdate:modelValue":l[12]||(l[12]=I=>b.value.username=I),placeholder:"ËØ∑ËæìÂÖ•Áî®Êà∑Âêç",maxlength:"20"},null,8,["modelValue"])]),_:1}),o(E,{label:"ÂØÜÁ†Å",required:""},{default:a(()=>[o(y,{modelValue:b.value.password,"onUpdate:modelValue":l[13]||(l[13]=I=>b.value.password=I),type:"password",placeholder:"ËØ∑ËæìÂÖ•ÂØÜÁ†ÅÔºàËá≥Â∞ë6‰ΩçÔºâ","show-password":""},null,8,["modelValue"])]),_:1}),o(E,{label:"ËßíËâ≤",required:""},{default:a(()=>[o(ce,{modelValue:b.value.role,"onUpdate:modelValue":l[14]||(l[14]=I=>b.value.role=I),placeholder:"ËØ∑ÈÄâÊã©ËßíËâ≤",style:{width:"100%"}},{default:a(()=>[o(N,{label:"üëë ÁÆ°ÁêÜÂëò",value:"Admin"}),o(N,{label:"üîß Áª¥‰øÆÂ∑•",value:"Maintainer"}),o(N,{label:"üéì Â≠¶Áîü",value:"Student"})]),_:1},8,["modelValue"])]),_:1}),o(E,{label:"ÊâãÊú∫Âè∑"},{default:a(()=>[o(y,{modelValue:b.value.phoneNumber,"onUpdate:modelValue":l[15]||(l[15]=I=>b.value.phoneNumber=I),placeholder:"ËØ∑ËæìÂÖ•ÊâãÊú∫Âè∑ÔºàÂèØÈÄâÔºâ",maxlength:"11"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),o(Xe,{modelValue:k.value,"onUpdate:modelValue":l[21]||(l[21]=I=>k.value=I),title:"ÈáçÁΩÆÂØÜÁ†Å",width:"500px","close-on-click-modal":!1},{footer:a(()=>[o(H,{onClick:l[20]||(l[20]=I=>k.value=!1)},{default:a(()=>[...l[37]||(l[37]=[S("ÂèñÊ∂à",-1)])]),_:1}),o(H,{type:"primary",onClick:K,loading:j.value},{default:a(()=>[...l[38]||(l[38]=[S("Á°ÆÂÆöÈáçÁΩÆ",-1)])]),_:1},8,["loading"])]),default:a(()=>[o(L,{model:q.value,"label-width":"100px"},{default:a(()=>[o(E,{label:"Áî®Êà∑"},{default:a(()=>[o(y,{modelValue:q.value.username,"onUpdate:modelValue":l[18]||(l[18]=I=>q.value.username=I),disabled:""},null,8,["modelValue"])]),_:1}),o(E,{label:"Êñ∞ÂØÜÁ†Å"},{default:a(()=>[o(y,{modelValue:q.value.newPassword,"onUpdate:modelValue":l[19]||(l[19]=I=>q.value.newPassword=I),type:"password",placeholder:"ËØ∑ËæìÂÖ•Êñ∞ÂØÜÁ†ÅÔºàËá≥Â∞ë6‰ΩçÔºâÊàñÁïôÁ©∫‰ΩøÁî®ÈªòËÆ§ÂØÜÁ†Å","show-password":"",clearable:""},null,8,["modelValue"])]),_:1}),o(rn,{title:"ÊèêÁ§∫Ôºö‰∏çËæìÂÖ•ÂØÜÁ†ÅÂ∞ÜÈáçÁΩÆ‰∏∫ÈªòËÆ§ÂØÜÁ†Å a123456Ôºà7‰ΩçÔºâ",type:"info",closable:!1,"show-icon":""})]),_:1},8,["model"])]),_:1},8,["modelValue"]),o(Xe,{modelValue:x.value,"onUpdate:modelValue":l[25]||(l[25]=I=>x.value=I),title:"‰øÆÊîπËßíËâ≤",width:"500px","close-on-click-modal":!1},{footer:a(()=>[o(H,{onClick:l[24]||(l[24]=I=>x.value=!1)},{default:a(()=>[...l[39]||(l[39]=[S("ÂèñÊ∂à",-1)])]),_:1}),o(H,{type:"primary",onClick:T,loading:w.value},{default:a(()=>[...l[40]||(l[40]=[S("Á°ÆÂÆö‰øÆÊîπ",-1)])]),_:1},8,["loading"])]),default:a(()=>[o(L,{model:W.value,"label-width":"100px"},{default:a(()=>[o(E,{label:"Áî®Êà∑"},{default:a(()=>[o(y,{modelValue:W.value.username,"onUpdate:modelValue":l[22]||(l[22]=I=>W.value.username=I),disabled:""},null,8,["modelValue"])]),_:1}),o(E,{label:"ÂΩìÂâçËßíËâ≤"},{default:a(()=>[o(G,{type:se(W.value.currentRole),size:"large"},{default:a(()=>[S(F(ge(W.value.currentRole)),1)]),_:1},8,["type"])]),_:1}),o(E,{label:"Êñ∞ËßíËâ≤",required:""},{default:a(()=>[o(ce,{modelValue:W.value.newRole,"onUpdate:modelValue":l[23]||(l[23]=I=>W.value.newRole=I),placeholder:"ËØ∑ÈÄâÊã©Êñ∞ËßíËâ≤",style:{width:"100%"}},{default:a(()=>[o(N,{label:"üëë ÁÆ°ÁêÜÂëò",value:"Admin"}),o(N,{label:"üîß Áª¥‰øÆÂ∑•",value:"Maintainer"}),o(N,{label:"üéì Â≠¶Áîü",value:"Student"})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}},xa=Ve(Pa,[["__scopeId","data-v-9f7fc886"]]),Na=[{path:"/",name:"Login",component:Hs},{path:"/login",redirect:"/"},{path:"/orders",name:"OrderList",component:Ao,meta:{requiresAuth:!0}},{path:"/orders/create",name:"OrderCreate",component:Vo,meta:{requiresAuth:!0}},{path:"/orders/:id",name:"OrderDetail",component:jo,meta:{requiresAuth:!0}},{path:"/notifications",name:"NotificationCenter",component:ma,meta:{requiresAuth:!0}},{path:"/settings",name:"Settings",component:xa,meta:{requiresAuth:!0}}],Re=Us({history:ps(),routes:Na});Re.beforeEach(async(e,t,s)=>{const n=sessionStorage.getItem("token");console.log("üîç Ë∑ØÁî±ÂÆàÂç´:",e.path,"requiresAuth:",e.meta.requiresAuth,"hasToken:",!!n),e.meta.requiresAuth&&!n?(console.log("‚õî Êú™ÁôªÂΩïÔºåË∑≥ËΩ¨Âà∞ÁôªÂΩïÈ°µ"),s("/")):(e.meta.requiresAuth&&n&&(!re.connection||re.connection.state==="Disconnected")&&(console.log("üîå Ê£ÄÊµãÂà∞SignalRÊú™ËøûÊé•ÔºåËá™Âä®ÂêØÂä®..."),await re.startConnection()),s())});const Oa={id:"app"},Va={__name:"App",setup(e){const t=Yt(),s=V(!1),n=V("ËøûÊé•‰∏≠..."),r=V(!1);let d=null;const v=V(!1);return ut(()=>t.path,g=>{v.value=g!=="/"&&g!=="/login"},{immediate:!0}),He(()=>{re.onConnectionStateChanged=(g,u,h=!1)=>{s.value=g,n.value=u,r.value=h},re.connection?.state===xe.Connected&&(s.value=!0,n.value="Â∑≤ËøûÊé•",r.value=!1),d=setInterval(async()=>{sessionStorage.getItem("token")&&re.connection?.state===xe.Disconnected&&await re.startConnection()},5e3)}),Sn(()=>{re.onConnectionStateChanged=null,d&&(clearInterval(d),d=null)}),(g,u)=>{const h=A("router-view");return $(),ne("div",Oa,[o(h)])}}},Ye=Rn(Va);for(const[e,t]of Object.entries(kn))Ye.component(e,t);Ye.use(An);Ye.use(Re);Ye.mount("#app");
