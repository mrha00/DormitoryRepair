# 🏠 智慧宿舍报修平台

一个基于.NET 8和Vue 3的现代化宿舍维修管理系统，实现了完整的RBAC权限控制、工单管理、实时通知和消息中心等功能。

## ✨ 项目亮点

- 🔐 **安全可靠**: JWT + BCrypt 密码加密，基于角色的权限控制
- 📡 **实时通知**: SignalR 实现工单指派实时推送
- 💬 **消息中心**: 历史消息查看、未读标记、消息删除
- 🎨 **现代化UI**: 渐变色彩、流畅动画、响应式设计
- 👥 **多角色管理**: 学生、维修工、管理员三种角色
- ⚡ **高性能**: Vite 构建、分页加载、优化查询

## 项目结构

```
毕业设计/
├── 后端/                          # 后端服务
│   ├── SmartDormitoryRepair.Api/   # Web API项目
│   ├── SmartDormitoryRepair.Domain/# 领域模型
│   └── README.md                  # 后端说明
├── 前端/                          # 前端应用
│   ├── SmartDormitoryRepair.Web/   # Vue 3项目
│   └── README.md                  # 前端说明
├── 文档/                          # 项目文档
│   └── 开发文档/                  # 开发相关文档
└── README.md                     # 项目根说明
```

## 技术架构

### 后端技术栈
- 🔹 **.NET 8 Web API** - 最新的.NET框架
- 🔹 **Entity Framework Core** - ORM 数据访问
- 🔹 **MySQL 8.0** - 关系型数据库
- 🔹 **JWT Bearer Authentication** - 身份认证
- 🔹 **BCrypt.Net** - 密码加密
- 🔹 **SignalR** - 实时通信
- 🔹 **RBAC权限系统** - 基于角色的访问控制

### 前端技术栈
- 🔸 **Vue 3** - Composition API
- 🔸 **Element Plus** - UI组件库
- 🔸 **Vue Router** - 路由管理
- 🔸 **Axios** - HTTP客户端
- 🔸 **Vite** - 构建工具
- 🔸 **@microsoft/signalr** - SignalR客户端

## 🚀 核心功能

### 1. 🔐 用户认证与权限管理
- **用户注册与登录** - 支持学生、维修工、管理员三种角色
- **JWT Token认证** - 安全的身份验证机制
- **RBAC权限系统** - 基于角色的访问控制
- **权限动态分配** - 灵活的权限管理
- **用户信息展示** - 右上角头像下拉菜单，显示用户名、角色、手机号

### 2. 📋 工单管理系统
- **工单创建** - 学生提交报修工单（标题、描述、位置）
- **工单列表** - 支持分页、筛选、状态查询
- **状态管理** - 待处理/处理中/已完成三种状态
- **工单指派** - 管理员/维修工可指派维修人员
- **我的工单** - 维修工默认只显示分配给自己的工单
- **全部工单** - 维修工可切换查看所有工单
- **工单详情** - 查看完整的工单信息

### 3. 👑 管理员功能
- **修改状态** - 下拉框选择，带黄蓝绿圆点标识，无限制修改
- **指派维修工** - 为未指派的工单分配维修人员
- **更换维修工** - 下拉框选择，重新分配维修人员
- **删除工单** - 删除不合理的工单及其相关通知

### 4. 📡 实时通知系统
- **SignalR实时推送** - 工单指派/重新指派时实时通知维修工
- **浏览器通知** - 右上角ElNotification弹窗显示
- **点击跳转** - 点击通知直接跳转到对应工单详情
- **声音提醒** - 收到新通知时播放提示音
- **自动刷新** - 收到通知后自动刷新工单列表

### 5. 💬 消息中心
- **消息列表** - 查看所有历史通知消息
- **未读标记** - 显示未读消息数量角标
- **消息筛选** - 按类型筛选（全部/工单指派/工单重新指派）
- **消息删除** - 删除不需要的消息
- **标记已读** - 点击消息自动标记为已读
- **分页显示** - 支持大量消息的分页查看

### 6. 🎨 现代化界面设计
- **响应式布局** - 适配桌面端和移动端
- **📱 移动端深度优化** - 卡片布局、触摸友好、完美适配
- **渐变色彩** - 紫色渐变背景，现代化视觉效果
- **流畅动画** - 按钮悬停、卡片动画、页面过渡
- **状态标识** - 黄蓝绿圆点显示工单状态
- **用户友好** - 直观的操作流程，清晰的视觉层次

## 💻 部署指南

### 后端部署

```bash
# 1. 安装.NET 8 SDK
# 下载地址: https://dotnet.microsoft.com/download/dotnet/8.0

# 2. 配置数据库连接字符串
# 编辑 appsettings.json 文件

# 3. 执行数据库迁移
cd 后端/SmartDormitoryRepair.Api
dotnet ef database update

# 4. 启动服务
dotnet run
# 服务将运行在 http://localhost:5002
```

### 前端部署

```bash
# 1. 安装Node.js (推荐v16+)
# 下载地址: https://nodejs.org/

# 2. 安装依赖
cd 前端/SmartDormitoryRepair.Web
npm install

# 3. 开发模式运行
npm run dev
# 应用将运行在 http://localhost:5173

# 4. 生产构建
npm run build
# 构建文件将生成在 dist/ 目录
```

### 默认账户

| 角色 | 用户名 | 密码 | 说明 |
|------|----------|----------|------|
| 维修工 | 张师傅 | admin123 | 可处理工单 |
| 维修工 | 李师傅 | admin123 | 可处理工单 |
| 学生 | 张三 | password123 | 可提交工单 |

## 📸 界面截图

### 登录页面
> 现代化的登录界面，支持用户名/密码登录

### 工单列表
> 支持分页、筛选、状态查询，管理员有额外的管理功能

### 消息中心
> 查看所有历史通知，支持筛选、删除、标记已读

## 🛠️ 项目特点

- ✅ **安全性**: 使用JWT和BCrypt保障用户信息安全
- ✅ **实时性**: SignalR实现工单指派实时通知
- ✅ **可扩展性**: 基于RBAC的权限模型便于功能扩展
- ✅ **现代化**: 采用最新的.NET 8和Vue 3技术栈
- ✅ **响应式**: 前端界面适配不同设备屏幕
- ✅ **📱 移动端优化**: 深度优化移动端体验，卡片布局，触摸友好
- ✅ **易维护**: 清晰的项目结构和代码组织

## 📚 技术文档

- [API文档](./文档/API文档.md)
- [数据库设计](./文档/数据库设计.md)
- [部署指南](./文档/部署指南.md)
- [📱 移动端优化文档](./前端/SmartDormitoryRepair.Web/MOBILE_OPTIMIZATION.md)

## 🤝 贡献指南

欢迎提交 Issue 和 Pull Request！

1. Fork 本仓库
2. 创建特性分支 (`git checkout -b feature/AmazingFeature`)
3. 提交修改 (`git commit -m 'Add some AmazingFeature'`)
4. 推送到分支 (`git push origin feature/AmazingFeature`)
5. 开启 Pull Request

## 📝 许可证

本项目仅供学习交流使用。

---

⭐ 如果这个项目对你有帮助，请给个 Star 吧！
